import{x as w,_ as le,f as i,h as ie,l as re,m as ce,r as v,o as S,c as ue,a as u,d as a,w as r,i as c,g as M,j as de,F as pe,q as h,t as ve,s as N,p as me,e as fe,v as Q}from"./index-a0c708ca.js";import{g as k,m as _e,M as be,B as ge,a as $}from"./ModalForm-cb6eb8ec.js";const ye=async()=>{try{const n=k(),{data:o}=await w.get("/maintenance/eps",{headers:{token:n}});return o}catch(n){console.error(n)}},he=async n=>{try{const o=k(),{data:d}=await w.post("/maintenance/eps/register",{name:n.name,description:n.description,observation:n.observation},{headers:{token:o}});return d}catch(o){console.error(o)}},qe=async n=>{try{const o=k(),{data:d}=await w.put(`/maintenance/eps/update/${n.id}`,{name:n.name,description:n.description,observation:n.observation},{headers:{token:o}});return d}catch(o){console.error(o)}},Ee=async n=>{try{const o=k(),{data:d}=await w.put(`/maintenance/eps/inactive/${n}`,{},{headers:{token:o}});return d}catch(o){console.error(o)}},we=async n=>{try{const o=k(),{data:d}=await w.put(`/maintenance/eps/active/${n}`,{},{headers:{token:o}});return d}catch(o){console.error(o)}};const D=n=>(me("data-v-80457199"),n=n(),fe(),n),ke={class:"q-py-sm table-container"},xe=D(()=>u("h6",{class:"title q-my-lg"},"EPS",-1)),Ve={class:"container-content"},Se={class:"container-table q-mt-md q-pa-md",rounded:""},Ie={class:"accions-td"},Oe={class:"accions-td"},ze=D(()=>u("i",{class:"icon icon-check"},null,-1)),Ae={class:"q-my-md text-center"},Ce={class:"row q-px-xl"},Me={class:"col-12"},Ne=D(()=>u("span",{class:"text-required q-pb-sm"},[Q("Todos los campos con "),u("span",{class:"text-red"},"*"),Q(" son obligatorios")],-1)),De={class:"row justify-center"},Be={__name:"Eps",setup(n){const o=_e(),d=i(""),x=i(!1),I=i(!0),y=i([]),q=i([]),B=i(),U=ie(()=>p.value==""),H=[t=>!!t||"Este campo es requerido"];let m=i(""),p=i(""),f=i(""),_=i(""),O=i(""),z=i(""),A=i(""),g=i("active");const b=re(),P=i([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"observation",label:"Observación",field:"observation",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),J=t=>{p.value=t},K=t=>{f.value=t},L=t=>{_.value=t},X=()=>{d.value="REGISTRAR EPS",O.value="",z.value="",A.value="",I.value=!0,o.toggleModal(),p.value="",f.value="",_.value=""},Y=t=>{d.value="EDITAR EPS",I.value=!1,B.value=t._id,O.value=t.name,z.value=t.description,A.value=t.observation,p.value=t.name,f.value=t.description,_.value=t.observation,o.toggleModal()};async function Z(t){try{const s=await Ee(t);b.notify({type:"positive",message:"Eps desactivada correctamente",position:"top"}),y.value=[],q.value=[],E()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function ee(){o.toggleModal();try{const t=await he({name:p.value,description:f.value,observation:_.value});b.notify({type:"positive",message:"Eps registrada correctamente",position:"top"}),y.value=[],E()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}const E=async()=>{y.value=[],q.value=[],x.value=!0;try{const{eps:t}=await ye();let s=1,V=1;t.forEach(l=>{l.status=l.status?"Inactivo":"Activo",l.status=="Activo"?(l.id=s++,y.value.push(l)):(l.id=V++,q.value.push(l)),l.description=l.description.trim()==""?"No registra":l.description,l.observation=l.observation.trim()==""?"No registra":l.observation}),x.value=!1}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}};async function te(){try{const t=await qe({id:B.value,name:p.value,description:f.value,observation:_.value});b.notify({type:"positive",position:"top",message:"Eps actualizada correctamente"}),o.toggleModal(),y.value=[],E()}catch{b.notify({type:"negative",position:"top",message:"Ocurrió un error"})}p.value="",f.value="",_.value=""}async function ae(t){try{const s=await we(t);b.notify({type:"positive",message:"Eps activada correctamente",position:"top"}),y.value=[],q.value=[],E()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}return ce(()=>{E()}),(t,s)=>{const V=v("q-separator"),l=v("q-tab"),oe=v("q-tabs"),R=v("q-icon"),T=v("q-input"),C=v("q-btn"),j=v("q-btn-group"),F=v("q-table"),W=v("q-tab-panel"),ne=v("q-tab-panels"),se=v("q-card");return S(),ue(pe,null,[u("div",ke,[xe,a(V,{class:"separator"}),u("div",Ve,[a(ge,{onOnClick:X,label:"Crear nueva EPS"}),u("div",Se,[a(se,null,{default:r(()=>[a(oe,{modelValue:c(g),"onUpdate:modelValue":s[0]||(s[0]=e=>h(g)?g.value=e:g=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[a(l,{name:"active",label:"Activos"}),a(l,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),a(V),a(ne,{modelValue:c(g),"onUpdate:modelValue":s[3]||(s[3]=e=>h(g)?g.value=e:g=e),animated:""},{default:r(()=>[a(W,{name:"active"},{default:r(()=>[a(F,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:y.value,columns:P.value,filter:c(m),loading:x.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(T,{borderless:"",dense:"",debounce:"300",modelValue:c(m),"onUpdate:modelValue":s[1]||(s[1]=e=>h(m)?m.value=e:m=e),placeholder:"Search"},{append:r(()=>[a(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(e=>[u("td",Ie,[a(j,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(C,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:G=>Y(e.row)},null,8,["onClick"]),a(C,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:G=>Z(e.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),a(W,{name:"inactive"},{default:r(()=>[a(F,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:q.value,columns:P.value,filter:c(m),loading:x.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(T,{borderless:"",dense:"",debounce:"300",modelValue:c(m),"onUpdate:modelValue":s[2]||(s[2]=e=>h(m)?m.value=e:m=e),placeholder:"Search"},{append:r(()=>[a(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(e=>[u("td",Oe,[a(j,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(C,{"text-color":"blue-10",class:"col q-pa-none",onClick:G=>ae(e.row._id)},{default:r(()=>[ze]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),c(o).modalIsOpen?(S(),M(be,{key:0},{default:r(()=>[u("h6",Ae,ve(d.value),1),u("div",Ce,[u("div",Me,[a(N,{label:"Nombre",required:!0,type:"text",ruless:H,value:c(O),modelValue:c(p),"onUpdate:modelValue":s[4]||(s[4]=e=>h(p)?p.value=e:p=e),onOnWrite:J},null,8,["value","modelValue"]),a(N,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:c(z),modelValue:c(f),"onUpdate:modelValue":s[5]||(s[5]=e=>h(f)?f.value=e:f=e),onOnWrite:K},null,8,["value","modelValue"]),a(N,{class:"q-pb-xs",label:"Observación",type:"text",required:!1,value:c(A),modelValue:c(_),"onUpdate:modelValue":s[6]||(s[6]=e=>h(_)?_.value=e:_=e),onOnWrite:L},null,8,["value","modelValue"]),Ne,u("div",De,[I.value?(S(),M($,{key:0,disable:c(U),onOnClick:ee},null,8,["disable"])):(S(),M($,{key:1,disable:c(U),onOnClick:te},null,8,["disable"]))])])])]),_:1})):de("",!0)],64)}}},Re=le(Be,[["__scopeId","data-v-80457199"]]);export{Re as default};
