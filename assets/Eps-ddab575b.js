import{s as I,_ as me,l as _e,m as be,g as r,q as ge,f as H,v as ye,x as he,r as v,o as S,c as J,a as u,d as t,w as i,h as c,i as D,M as qe,j as K,F as we,y as E,t as Ee,z as R,B as X,p as ke,e as xe,A as Y}from"./index-a2b1bd69.js";import{g as O,B as Ve}from"./ButtonAdd-ed09f57b.js";const Se=async s=>{try{const d=O(),{data:n}=await I.get("/maintenance/eps",{headers:{token:d,farm:s}});return n}catch(d){return d}},Ie=async(s,d)=>{try{const n=O(),{data:p}=await I.post("/maintenance/eps/register",{name:s.name,description:s.description,observation:s.observation},{headers:{token:n,farm:d}});return p}catch(n){return n}},Oe=async(s,d)=>{try{const n=O(),{data:p}=await I.put(`/maintenance/eps/update/${s.id}`,{name:s.name,description:s.description,observation:s.observation},{headers:{token:n,farm:d}});return p}catch(n){return n}},Ae=async(s,d)=>{try{const n=O(),{data:p}=await I.put(`/maintenance/eps/inactive/${s}`,{},{headers:{token:n,farm:d}});return p}catch(n){return n}},Ce=async(s,d)=>{try{const n=O(),{data:p}=await I.put(`/maintenance/eps/active/${s}`,{},{headers:{token:n,farm:d}});return p}catch(n){return n}};const U=s=>(ke("data-v-6461c8b4"),s=s(),xe(),s),ze={class:"q-py-sm table-container"},Me={class:"row"},Ne=U(()=>u("h6",{class:"title q-my-lg"},"EPS",-1)),Be={class:"container-content"},De={class:"container-table q-mt-md q-pa-md",rounded:""},Re={class:"accions-td"},Ue={class:"accions-td"},Pe=U(()=>u("i",{class:"icon icon-check"},null,-1)),Fe={class:"q-my-md text-center"},Te={class:"row q-px-xl"},je={class:"col-12"},We=U(()=>u("span",{class:"text-required q-pb-sm"},[Y("Todos los campos con "),u("span",{class:"text-red"},"*"),Y(" son obligatorios")],-1)),$e={class:"row justify-center"},Ge={key:0,class:"spinner"},Le={__name:"Eps",setup(s){const d=_e(),n=be(),p=r(""),f=r(!1),C=r(!0),w=r([]),V=r([]),P=r(),Z=ge(),h=r(!1),F=H(()=>m.value==""?!0:h.value==!0),ee=[e=>!!e||"Este campo es requerido"];let _=r(""),q=r("active"),m=r(""),b=r(""),g=r(""),z=r(""),M=r(""),N=r("");const T=r([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"observation",label:"Observación",field:"observation",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),ae=e=>{m.value=e},te=e=>{b.value=e},oe=e=>{g.value=e},ne=()=>{p.value="REGISTRAR EPS",se(),C.value=!0,n.toggleModal()},se=()=>{z.value="",M.value="",N.value="",m.value="",b.value="",g.value=""},le=e=>{p.value="EDITAR EPS",C.value=!1,P.value=e._id,z.value=e.name,M.value=e.description,N.value=e.observation,m.value=e.name,b.value=e.description,g.value=e.observation,n.toggleModal()},y=(e,o)=>{d.notify({type:e,message:o,position:"top"})},k=async()=>{w.value=[],V.value=[],f.value=!0;try{const{eps:e}=await Se(x.value);let o=1,A=1;e.forEach(l=>{l.status=l.status?"Inactivo":"Activo",l.status=="Activo"?(l.id=o++,w.value.push(l)):(l.id=A++,V.value.push(l)),l.description=l.description.trim()==""?"No registra":l.description,l.observation=l.observation.trim()==""?"No registra":l.observation}),f.value=!1}catch{f.value=!1,y("negative","Ocurrió un error")}};async function re(){h.value=!0;try{const e=await Ie({name:m.value,description:b.value,observation:g.value},x.value);h.value=!1,y("positive","Eps registrada correctamente"),n.toggleModal(),w.value=[],k()}catch{h.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}}async function ie(){h.value=!0;try{const e=await Oe({id:P.value,name:m.value,description:b.value,observation:g.value},x.value);h.value=!1,y("positive","Eps actualizada correctamente"),n.toggleModal(),w.value=[],k()}catch{h.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}m.value="",b.value="",g.value=""}async function ce(e){f.value=!0;try{const o=await Ce(e,x.value);y("positive","Eps activada correctamente"),f.value=!1,w.value=[],V.value=[],k()}catch{f.value=!1,y("negative","Ocurrió un error")}}async function ue(e){f.value=!1;try{const o=await Ae(e,x.value);f.value=!1,y("positive","Eps desactivada correctamente"),w.value=[],V.value=[],k()}catch{f.value=!1,y("negative","Ocurrió un error")}}const x=H(()=>Z.idSelected);return ye(x,()=>{k()}),he(()=>{k()}),(e,o)=>{const A=v("q-separator"),l=v("q-tab"),de=v("q-tabs"),j=v("q-icon"),W=v("q-input"),B=v("q-btn"),$=v("q-btn-group"),G=v("q-table"),L=v("q-tab-panel"),ve=v("q-tab-panels"),pe=v("q-card"),fe=v("q-spinner-ios");return S(),J(we,null,[u("div",ze,[u("div",Me,[u("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=a=>e.$router.back())}),Ne]),t(A,{class:"separator"}),u("div",Be,[t(Ve,{onOnClick:ne,label:"Crear nueva EPS"}),u("div",De,[t(pe,null,{default:i(()=>[t(de,{modelValue:c(q),"onUpdate:modelValue":o[1]||(o[1]=a=>E(q)?q.value=a:q=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[t(l,{name:"active",label:"Activos"}),t(l,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(A),t(ve,{modelValue:c(q),"onUpdate:modelValue":o[4]||(o[4]=a=>E(q)?q.value=a:q=a),animated:""},{default:i(()=>[t(L,{name:"active"},{default:i(()=>[t(G,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:w.value,columns:T.value,filter:c(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(W,{borderless:"",dense:"",debounce:"300",modelValue:c(_),"onUpdate:modelValue":o[2]||(o[2]=a=>E(_)?_.value=a:_=a),placeholder:"Search"},{append:i(()=>[t(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(a=>[u("td",Re,[t($,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(B,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Q=>le(a.row)},null,8,["onClick"]),t(B,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Q=>ue(a.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(L,{name:"inactive"},{default:i(()=>[t(G,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:V.value,columns:T.value,filter:c(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(W,{borderless:"",dense:"",debounce:"300",modelValue:c(_),"onUpdate:modelValue":o[3]||(o[3]=a=>E(_)?_.value=a:_=a),placeholder:"Search"},{append:i(()=>[t(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(a=>[u("td",Ue,[t($,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(B,{"text-color":"blue-10",class:"col q-pa-none",onClick:Q=>ce(a.row._id)},{default:i(()=>[Pe]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),c(n).modalIsOpen?(S(),D(qe,{key:0},{default:i(()=>[u("h6",Fe,Ee(p.value),1),u("div",Te,[u("div",je,[t(R,{label:"Nombre",required:!0,type:"text",ruless:ee,value:c(z),modelValue:c(m),"onUpdate:modelValue":o[5]||(o[5]=a=>E(m)?m.value=a:m=a),onOnWrite:ae},null,8,["value","modelValue"]),t(R,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:c(M),modelValue:c(b),"onUpdate:modelValue":o[6]||(o[6]=a=>E(b)?b.value=a:b=a),onOnWrite:te},null,8,["value","modelValue"]),t(R,{class:"q-pb-xs",label:"Observación",type:"text",required:!1,value:c(N),modelValue:c(g),"onUpdate:modelValue":o[7]||(o[7]=a=>E(g)?g.value=a:g=a),onOnWrite:oe},null,8,["value","modelValue"]),We,u("div",$e,[C.value?(S(),D(X,{key:0,disable:c(F),onOnClick:re},null,8,["disable"])):(S(),D(X,{key:1,disable:c(F),onOnClick:ie},null,8,["disable"]))]),h.value?(S(),J("div",Ge,[t(fe,{color:"primary",size:"2.5em"})])):K("",!0)])])]),_:1})):K("",!0)],64)}}},Je=me(Le,[["__scopeId","data-v-6461c8b4"]]);export{Je as default};
