import{g as U,B as re}from"./ButtonAdd-59c43077.js";import{s as A,_ as ie,f as s,h as ue,l as pe,r as c,y as me,o as E,c as ce,a as d,d as o,w as b,i as n,g as fe,j as be,F as ve,m as r,z as ye,A as ge,q as w,B as _e,p as qe,e as Ve,v as B}from"./index-85c6c6a3.js";import{m as he,M as Se,B as we}from"./ButtonSave-c0735596.js";const xe=async()=>{try{const a=U(),{data:i}=await A.get("/maintenance/people",{headers:{token:a}});return i}catch(a){console.error(a)}},Pe=async a=>{try{const i=U(),{data:P}=await A.post("/maintenance/people/register",{document:a.document,name:a.name,lastName:a.lastName,description:a.description,birthDate:a.birthDate,phone:a.phone,bloodType:a.bloodType,peopleType:a.peopleType},{headers:{token:i}});return P}catch(i){console.error(i)}};const z=a=>(qe("data-v-00ddd469"),a=a(),Ve(),a),Te={class:"q-py-md table-container"},ze=z(()=>d("h6",{class:"title q-my-lg"},"PERSONAS",-1)),De={class:"container-table q-mt-md q-pa-md",rounded:""},Ne=z(()=>d("h6",{class:"q-my-md text-center"},"REGISTRAR PERSONA",-1)),Oe={class:"row q-px-xl"},ke={class:"col-12"},Ie={class:"q-pa-md",style:{"max-width":"300px"}},Ee={class:"row items-center justify-end"},Be=z(()=>d("span",{class:"text-required q-pb-sm"},[B("Todos los campos con "),d("span",{class:"text-red"},"*"),B(" son obligatorios")],-1)),Ue={class:"row justify-center"},Ae={__name:"People",setup(a){const i=he(),P=["M","F","I"],C=["1","2","3"],M=["a+","a+","ab+","ab-","b+","b-","o+","o-"],R=["1","2","3","4","5","6"],T=s(!1),D=s("");let v=s(""),p=s(""),S=s(""),y=s(""),F=s(""),g=s(""),_=s(null),q=s(null),V=s(null),h=s(""),f=s(""),W=ue(()=>p.value=="");const u=[t=>!!t||"Este campo es requerido"],N=s([]),G=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"typeDocument",label:"Tipo",field:"typeDocument",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"document",label:"Número Documento",field:"document",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"lastName",label:"Apellido",field:"lastName",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"birthDay",label:"Fecha de Nacimiento",field:"birthDay",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"phone",label:"Teléfono",field:"phone",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"eps",label:"Eps",field:"eps",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"bloodType",label:"Tipo de Sangre",field:"bloodType",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),j=()=>{i.toggleModal(),D.value="",v.value="",p.value="",y.value="",F.value="",g.value="",_.value="",q.value="",V.value="",h.value="",f.value=""},L=t=>{D.value=t},H=t=>{v.value=t},J=t=>{p.value=t},K=t=>{y.value=t},Q=t=>{g.value=t},X=t=>{_.value=t},Y=t=>{q.value=t},Z=t=>{V.value=t},$=t=>{h.value=t},ee=t=>{f.value=t},te=()=>{le(),i.toggleModal()},le=async()=>{await Pe({name:p.value,description:f.value}),O()},O=async()=>{T.value=!0;const{people:t}=await xe();let l=1;t.forEach(m=>{m.status=m.status?"Inactivo":"Activo",m.id=l++,m.description=m.description.trim()==""?"No registra":m.description}),N.value=t,T.value=!1};return pe(()=>{O()}),(t,l)=>{const m=c("q-separator"),k=c("q-icon"),I=c("q-input"),oe=c("q-table"),ae=c("q-btn"),se=c("q-date"),ne=c("q-popup-proxy"),x=c("q-select"),de=me("close-popup");return E(),ce(ve,null,[d("div",Te,[ze,o(m,{class:"separator"}),o(re,{onOnClick:j,label:"Crear nueva persona"}),d("div",De,[o(oe,{flat:"",bordered:"",title:"Personas","row-key":"name",rows:N.value,columns:G.value,filter:n(S),loading:T.value,"rows-per-page-options":[5,10,20]},{"top-right":b(()=>[o(I,{borderless:"",dense:"",debounce:"300",modelValue:n(S),"onUpdate:modelValue":l[0]||(l[0]=e=>r(S)?S.value=e:S=e),placeholder:"Search"},{append:b(()=>[o(k,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"])])]),n(i).modalIsOpen?(E(),fe(Se,{key:0},{default:b(()=>[Ne,d("div",Oe,[d("div",ke,[o(ge,{class:"q-mb-lg",onOnSelect:L,style:ye(t.selectStyles),type:"documents",label:"Tipo de Documento"},null,8,["style"]),o(w,{class:"q-pb-xs",label:"Número de Documento",required:!0,type:"text",ruless:u,modelValue:n(v),"onUpdate:modelValue":l[1]||(l[1]=e=>r(v)?v.value=e:v=e),onOnWrite:H},null,8,["modelValue"]),o(w,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:u,modelValue:n(p),"onUpdate:modelValue":l[2]||(l[2]=e=>r(p)?p.value=e:p=e),onOnWrite:J},null,8,["modelValue"]),o(w,{class:"q-pb-xs",label:"Apellido",required:!0,type:"text",ruless:u,modelValue:n(y),"onUpdate:modelValue":l[3]||(l[3]=e=>r(y)?y.value=e:y=e),onOnWrite:K},null,8,["modelValue"]),d("div",Ie,[o(I,{filled:"",modelValue:t.date,"onUpdate:modelValue":l[5]||(l[5]=e=>t.date=e),mask:"date",rules:["date"]},{append:b(()=>[o(k,{name:"event",class:"cursor-pointer"},{default:b(()=>[o(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[o(se,{modelValue:t.date,"onUpdate:modelValue":l[4]||(l[4]=e=>t.date=e)},{default:b(()=>[d("div",Ee,[_e(o(ae,{label:"Close",color:"primary",flat:""},null,512),[[de]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(w,{class:"q-pb-xs",label:"Teléfono",required:!0,type:"text",ruless:u,modelValue:n(g),"onUpdate:modelValue":l[6]||(l[6]=e=>r(g)?g.value=e:g=e),onOnWrite:Q},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Genero",required:!0,type:"text",ruless:u,modelValue:n(_),"onUpdate:modelValue":l[7]||(l[7]=e=>r(_)?_.value=e:_=e),options:P,onOnSelect:X},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"EPS",required:!0,type:"text",ruless:u,modelValue:n(q),"onUpdate:modelValue":l[8]||(l[8]=e=>r(q)?q.value=e:q=e),options:C,onOnSelect:Y},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Sangre",required:!0,type:"text",ruless:u,modelValue:n(V),"onUpdate:modelValue":l[9]||(l[9]=e=>r(V)?V.value=e:V=e),options:M,onOnSelect:Z},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Persona",required:!0,type:"text",ruless:u,modelValue:n(h),"onUpdate:modelValue":l[10]||(l[10]=e=>r(h)?h.value=e:h=e),options:R,onOnSelect:$},null,8,["modelValue"]),o(w,{class:"q-mb-lgs",label:"Descripción",required:!1,type:"text",ruless:u,modelValue:n(f),"onUpdate:modelValue":l[11]||(l[11]=e=>r(f)?f.value=e:f=e),onOnWrite:ee},null,8,["modelValue"]),Be,d("div",Ue,[o(we,{disable:n(W),onOnClick:te},null,8,["disable"])])])])]),_:1})):be("",!0)],64)}}},Fe=ie(Ae,[["__scopeId","data-v-00ddd469"]]);export{Fe as default};
