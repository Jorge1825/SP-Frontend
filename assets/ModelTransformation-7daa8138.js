import{l as S,s as I,_ as pe,m as _e,q as ge,g as s,v as be,f as K,x as ye,y as he,r as d,o as T,c as P,a as r,d as t,w as i,h as u,i as N,M as qe,j as X,F as we,z as M,t as Me,A as U,B as Y,p as ke,e as Ve,C as Z}from"./index-6c614867.js";import{B as xe}from"./ButtonAdd-91711192.js";const Te=async l=>{try{const c=S(),{data:o}=await I.get("/transformation/modeltrans",{headers:{token:c,farm:l}});return o}catch(c){return c}},Se=async(l,c)=>{try{const o=S(),{data:v}=await I.post("/transformation/modeltrans/register",{name:l.name,description:l.description,unitvalue:l.unitvalue},{headers:{token:o,farm:c}});return v}catch(o){return o}},Ie=async(l,c)=>{try{const o=S(),{data:v}=await I.put(`/transformation/modeltrans/update/${l.id}`,{name:l.name,description:l.description,unitvalue:l.unitvalue},{headers:{token:o,farm:c}});return v}catch(o){return o}},Oe=async(l,c)=>{try{const o=S(),{data:v}=await I.put(`/transformation/modeltrans/inactive/${l}`,{},{headers:{token:o,farm:c}});return v}catch(o){return o}},Ae=async(l,c)=>{try{const o=S(),{data:v}=await I.put(`/transformation/modeltrans/active/${l}`,{},{headers:{token:o,farm:c}});return v}catch(o){return o}};const R=l=>(ke("data-v-3edd8a10"),l=l(),Ve(),l),Ce={class:"q-py-sm table-container"},ze={class:"row"},Ee=R(()=>r("h6",{class:"title q-my-lg"},"Modelos de transformacion",-1)),De={class:"container-content"},Be={class:"container-table q-mt-md q-pa-md",rounded:""},Ne={class:"accions-td"},Ue={class:"accions-td"},Re=R(()=>r("i",{class:"icon icon-check"},null,-1)),Fe={class:"modal-activity"},je={class:"q-my-md text-center"},Le={class:"row q-px-xl"},We={class:"col-12"},$e=R(()=>r("span",{class:"text-required q-pb-sm"},[Z("Todos los campos con "),r("span",{class:"text-red"},"*"),Z(" son obligatorios")],-1)),Ge={class:"row justify-center"},Qe={key:0,class:"spinner"},He={__name:"ModelTransformation",setup(l){const c=_e(),o=ge(),v=s(""),m=s(!1),A=s(!0),w=s([]),x=s([]),F=s(),ee=be(),h=s(!1),j=K(()=>f.value==""||p.value==""||_.value==""?!0:h.value==!0),C=[a=>!!a||"Este campo es requerido"];let g=s(""),q=s("active"),f=s(""),p=s(""),_=s(""),z=s(""),E=s(""),D=s("");const L=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"unitvalue",label:"Valor unitario",field:"unitvalue",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),ae=a=>{f.value=a},te=a=>{p.value=a},oe=a=>{_.value=a},ne=()=>{v.value="REGISTRAR MODELO",le(),A.value=!0,o.toggleModal()},le=()=>{z.value="",E.value="",D.value="",f.value="",p.value="",_.value=""},se=a=>{v.value="EDITAR MODELO",A.value=!1,F.value=a._id,z.value=a.name,E.value=a.description,D.value=a.unitvalue,f.value=a.name,p.value=a.description,_.value=a.unitvalue,o.toggleModal()},y=(a,n)=>{c.notify({type:a,message:n,position:"top"})},k=async()=>{w.value=[],x.value=[],m.value=!0;try{const{models:a}=await Te(V.value);let n=1,O=1;a.forEach(b=>{b.status=b.status?"Inactivo":"Activo",b.status=="Activo"?(b.id=n++,w.value.push(b)):(b.id=O++,x.value.push(b))}),m.value=!1}catch{m.value=!1,y("negative","Ocurrió un error")}};async function re(){h.value=!0;try{await Se({name:f.value,description:p.value,unitvalue:_.value},V.value),h.value=!1,y("positive","Modelo de transformación registrado correctamente"),o.toggleModal(),w.value=[],k()}catch{h.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}}async function ie(){h.value=!0;try{await Ie({id:F.value,name:f.value,description:p.value,unitvalue:_.value},V.value),h.value=!1,y("positive","Modelo de transformación actualizado correctamente"),o.toggleModal(),w.value=[],k()}catch{h.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}f.value="",p.value="",_.value=""}async function ue(a){m.value=!0;try{await Ae(a,V.value),y("positive","Modelo de transformación activado correctamente"),m.value=!1,w.value=[],x.value=[],k()}catch{m.value=!1,y("negative","Ocurrió un error")}}async function ce(a){m.value=!1;try{await Oe(a,V.value),m.value=!1,y("positive","Modelo de transformación desactivado correctamente"),w.value=[],x.value=[],k()}catch{m.value=!1,y("negative","Ocurrió un error")}}const V=K(()=>ee.idSelected);return ye(V,()=>{k()}),he(()=>{k()}),(a,n)=>{const O=d("q-separator"),b=d("q-tab"),de=d("q-tabs"),W=d("q-icon"),$=d("q-input"),B=d("q-btn"),G=d("q-btn-group"),Q=d("q-table"),H=d("q-tab-panel"),ve=d("q-tab-panels"),me=d("q-card"),fe=d("q-spinner-ios");return T(),P(we,null,[r("div",Ce,[r("div",ze,[r("i",{class:"icon icon-backRoute q-pt-lg",onClick:n[0]||(n[0]=e=>a.$router.back())}),Ee]),t(O,{class:"separator"}),r("div",De,[t(xe,{onOnClick:ne,label:"Registrar nuevo modelo"}),r("div",Be,[t(me,null,{default:i(()=>[t(de,{modelValue:u(q),"onUpdate:modelValue":n[1]||(n[1]=e=>M(q)?q.value=e:q=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[t(b,{name:"active",label:"Activos"}),t(b,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(O),t(ve,{modelValue:u(q),"onUpdate:modelValue":n[4]||(n[4]=e=>M(q)?q.value=e:q=e),animated:""},{default:i(()=>[t(H,{name:"active"},{default:i(()=>[t(Q,{flat:"",bordered:"",title:"Modelos de transformación","row-key":"name",rows:w.value,columns:L.value,filter:u(g),loading:m.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t($,{borderless:"",dense:"",debounce:"300",modelValue:u(g),"onUpdate:modelValue":n[2]||(n[2]=e=>M(g)?g.value=e:g=e),placeholder:"Search"},{append:i(()=>[t(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(e=>[r("td",Ne,[t(G,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(B,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>se(e.row)},null,8,["onClick"]),t(B,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>ce(e.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(H,{name:"inactive"},{default:i(()=>[t(Q,{flat:"",bordered:"",title:"Modelos de transformación","row-key":"name",rows:x.value,columns:L.value,filter:u(g),loading:m.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t($,{borderless:"",dense:"",debounce:"300",modelValue:u(g),"onUpdate:modelValue":n[3]||(n[3]=e=>M(g)?g.value=e:g=e),placeholder:"Search"},{append:i(()=>[t(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(e=>[r("td",Ue,[t(G,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(B,{"text-color":"blue-10",class:"col q-pa-none",onClick:J=>ue(e.row._id)},{default:i(()=>[Re]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),u(o).modalIsOpen?(T(),N(qe,{key:0,class:"modal"},{default:i(()=>[r("div",Fe,[r("h6",je,Me(v.value),1),r("div",Le,[r("div",We,[t(U,{label:"Nombre",required:!0,type:"text",ruless:C,value:u(z),modelValue:u(f),"onUpdate:modelValue":n[5]||(n[5]=e=>M(f)?f.value=e:f=e),onOnWrite:ae},null,8,["value","modelValue"]),t(U,{class:"q-mb-md",label:"Descripción",required:!0,type:"text",ruless:C,value:u(E),modelValue:u(p),"onUpdate:modelValue":n[6]||(n[6]=e=>M(p)?p.value=e:p=e),onOnWrite:te},null,8,["value","modelValue"]),t(U,{class:"q-pb-xs",label:"Valor",required:!0,type:"text",ruless:C,value:u(D),modelValue:u(_),"onUpdate:modelValue":n[7]||(n[7]=e=>M(_)?_.value=e:_=e),onOnWrite:oe},null,8,["value","modelValue"]),$e,r("div",Ge,[A.value?(T(),N(Y,{key:0,disable:u(j),onOnClick:re},null,8,["disable"])):(T(),N(Y,{key:1,disable:u(j),onOnClick:ie},null,8,["disable"]))]),h.value?(T(),P("div",Qe,[t(fe,{color:"primary",size:"2.5em"})])):X("",!0)])])])]),_:1})):X("",!0)],64)}}},Pe=pe(He,[["__scopeId","data-v-3edd8a10"]]);export{Pe as default};
