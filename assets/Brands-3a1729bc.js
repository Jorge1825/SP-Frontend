import{_ as pe,q as _e,g as l,v as fe,f as K,m as me,x as ge,y as be,r as u,o as k,c as Q,a as n,d as o,w as s,h as r,i as D,M as ye,j as $,F as he,G as qe,H as E,z as y,t as we,A as P,E as Be,B as X,p as Ve,e as ke,C as Y,I as Ce,J as Se,K as xe,L as Ae}from"./index-6c614867.js";import{B as Ie}from"./ButtonAdd-91711192.js";const U=C=>(Ve("data-v-ccdd3f44"),C=C(),ke(),C),Me={class:"q-py-md table-container"},ze={class:"row"},Oe=U(()=>n("h6",{class:"title q-my-lg"},"MARCAS",-1)),Ne={class:"container-content"},Re={class:"container-table q-mt-md q-pa-md",rounded:""},De={class:"accions-td"},Ee={class:"accions-td"},Ue=U(()=>n("i",{class:"icon icon-check"},null,-1)),Fe={class:"modal-brands"},Te={class:"q-my-md text-center"},je={class:"row q-px-xl"},Ge={class:"col-12"},Le=U(()=>n("span",{class:"text-required q-pb-sm"},[Y("Todos los campos con "),n("span",{class:"text-red"},"*"),Y(" son obligatorios")],-1)),We={class:"row justify-center"},He={key:0,class:"spinner"},Je={__name:"Brands",setup(C){const w=_e(),A=l(""),p=l(!1),I=l(!0),h=l(!1),b=l([]),B=l([]),F=l(),Z=fe(),T=K(()=>!d.value||!v.value?!0:h.value==!0),M=[a=>!!a||"Este campo es requerido"];let _=l(""),d=l(""),c=l(""),v=l(""),z=l(""),O=l(""),N=l(""),g=l("active");const ee=me(),j=l([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"category",label:"Categoria",field:"category",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),ae=a=>{d.value=a},te=a=>{c.value=a},oe=a=>{v.value=a},le=()=>{A.value="REGISTRAR MARCAS",z.value="",O.value="",N.value="",I.value=!0,w.toggleModal(),d.value="",c.value="",v.value=""},ne=a=>{A.value="EDITAR MARCAS",I.value=!1,F.value=a._id,z.value=a.name,O.value=a.category,N.value=a.description,d.value=a.name,c.value=a.category,v.value=a.description,w.toggleModal()},f=(a,e)=>{ee.notify({type:a,message:e,position:"top"})},q=async()=>{b.value=[],B.value=[],p.value=!0;try{const{mark:a}=await qe(m.value),{category:e}=await E(m.value);let S=1,x=1;a.forEach(i=>{i.status=i.status?"Inactivo":"Activo",e.forEach(V=>{i.category==V._id&&(i.category=V.name)}),i.status=="Activo"?(i.id=S++,b.value.push(i)):(i.id=x++,B.value.push(i)),i.description=i.description.trim()==""?"No registra":i.description}),p.value=!1}catch{f("negative","Ocurrió un error")}};async function se(){h.value=!0;const{category:a}=await E(m.value);a.forEach(e=>{e.name==c.value&&(c.value=e._id)});try{await Ce({name:d.value,category:c.value,description:v.value},m.value),h.value=!1,w.toggleModal(),f("positive","Marca registrada correctamente"),b.value=[],q()}catch{f("negative","Ocurrió un error")}}async function re(){h.value=!0;const{category:a}=await E(m.value);a.forEach(e=>{e.name==c.value&&(c.value=e._id)});try{await Se({id:F.value,name:d.value,category:c.value,description:v.value},m.value),h.value=!1,f("positive","Marca actualizada correctamente"),w.toggleModal(),b.value=[],q()}catch{f("negative","Ocurrió un error")}d.value="",v.value="",c.value=""}async function ce(a){p.value=!0;try{const e=await xe(a,m.value);p.value=!1,f("positive","Marca activada correctamente"),b.value=[],B.value=[],q()}catch{p.value=!1,f("negative","Ocurrió un error")}}async function ie(a){p.value=!0;try{const e=await Ae(a,m.value);p.value=!1,f("positive","Marca desactivada correctamente"),b.value=[],B.value=[],q()}catch{p.value=!1,f("negative","Ocurrió un error")}}const m=K(()=>Z.idSelected);return ge(m,()=>{q()}),be(()=>{q()}),(a,e)=>{const S=u("q-separator"),x=u("q-tab"),i=u("q-tabs"),V=u("q-icon"),G=u("q-input"),R=u("q-btn"),L=u("q-btn-group"),W=u("q-table"),H=u("q-tab-panel"),ue=u("q-tab-panels"),de=u("q-card"),ve=u("q-spinner-ios");return k(),Q(he,null,[n("div",Me,[n("div",ze,[n("i",{class:"icon icon-backRoute q-pt-lg",onClick:e[0]||(e[0]=t=>a.$router.back())}),Oe]),o(S,{class:"separator"}),n("div",Ne,[o(Ie,{onOnClick:le,label:"Crear nueva marca"}),n("div",Re,[o(de,null,{default:s(()=>[o(i,{modelValue:r(g),"onUpdate:modelValue":e[1]||(e[1]=t=>y(g)?g.value=t:g=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:s(()=>[o(x,{name:"active",label:"Activos"}),o(x,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),o(S),o(ue,{modelValue:r(g),"onUpdate:modelValue":e[4]||(e[4]=t=>y(g)?g.value=t:g=t),animated:""},{default:s(()=>[o(H,{name:"active"},{default:s(()=>[o(W,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:b.value,columns:j.value,filter:r(_),loading:p.value,"rows-per-page-options":[5,10,20]},{"top-right":s(()=>[o(G,{borderless:"",dense:"",debounce:"300",modelValue:r(_),"onUpdate:modelValue":e[2]||(e[2]=t=>y(_)?_.value=t:_=t),placeholder:"Search"},{append:s(()=>[o(V,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":s(t=>[n("td",De,[o(L,{class:"full-width full-height",outline:"",square:""},{default:s(()=>[o(R,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>ne(t.row)},null,8,["onClick"]),o(R,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>ie(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),o(H,{name:"inactive"},{default:s(()=>[o(W,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:B.value,columns:j.value,filter:r(_),loading:p.value,"rows-per-page-options":[5,10,20]},{"top-right":s(()=>[o(G,{borderless:"",dense:"",debounce:"300",modelValue:r(_),"onUpdate:modelValue":e[3]||(e[3]=t=>y(_)?_.value=t:_=t),placeholder:"Search"},{append:s(()=>[o(V,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":s(t=>[n("td",Ee,[o(L,{class:"full-width full-height",outline:"",square:""},{default:s(()=>[o(R,{"text-color":"blue-10",class:"col q-pa-none",onClick:J=>ce(t.row._id)},{default:s(()=>[Ue]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(w).modalIsOpen?(k(),D(ye,{key:0,class:"modal"},{default:s(()=>[n("div",Fe,[n("h6",Te,we(A.value),1),n("div",je,[n("div",Ge,[o(P,{label:"Nombre",required:!0,type:"text",ruless:M,value:r(z),modelValue:r(d),"onUpdate:modelValue":e[5]||(e[5]=t=>y(d)?d.value=t:d=t),onOnWrite:ae},null,8,["value","modelValue"]),o(Be,{class:"q-pb-lg",label:"Categoria",required:!0,type:"category",ruless:M,value:r(O),modelValue:r(c),"onUpdate:modelValue":e[6]||(e[6]=t=>y(c)?c.value=t:c=t),onOnSelect:te},null,8,["value","modelValue"]),o(P,{class:"q-mb-xs",label:"Descripción",type:"text",required:!0,ruless:M,value:r(N),modelValue:r(v),"onUpdate:modelValue":e[7]||(e[7]=t=>y(v)?v.value=t:v=t),onOnWrite:oe},null,8,["value","modelValue"]),Le,n("div",We,[I.value?(k(),D(X,{key:0,disable:r(T),onOnClick:se},null,8,["disable"])):(k(),D(X,{key:1,disable:r(T),onOnClick:re},null,8,["disable"]))]),h.value?(k(),Q("div",He,[o(ve,{color:"primary",size:"2.5em"})])):$("",!0)])])])]),_:1})):$("",!0)],64)}}},$e=pe(Je,[["__scopeId","data-v-ccdd3f44"]]);export{$e as default};
