import{g as B,m as de,M as ue,B as ie,a as pe}from"./ModalForm-cb6eb8ec.js";import{x as A,_ as ce,f as s,h as me,m as fe,r as m,y as be,o as E,c as ge,a as r,d as o,w as b,i as n,g as ve,j as ye,F as _e,q as d,z as qe,A as Ve,s as w,B as he,p as Se,e as we,v as U}from"./index-a0c708ca.js";const xe=async()=>{try{const a=B(),{data:u}=await A.get("/maintenance/people",{headers:{token:a}});return u}catch(a){console.error(a)}},Pe=async a=>{try{const u=B(),{data:P}=await A.post("/maintenance/people/register",{document:a.document,name:a.name,lastName:a.lastName,description:a.description,birthDate:a.birthDate,phone:a.phone,bloodType:a.bloodType,peopleType:a.peopleType},{headers:{token:u}});return P}catch(u){console.error(u)}};const z=a=>(Se("data-v-98ca1831"),a=a(),we(),a),Te={class:"q-py-md table-container"},ze=z(()=>r("h6",{class:"title q-my-lg"},"PERSONAS",-1)),De={class:"container-table q-mt-md q-pa-md",rounded:""},Ne=z(()=>r("h6",{class:"q-my-md text-center"},"REGISTRAR PERSONA",-1)),Oe={class:"row q-px-xl"},ke={class:"col-12"},Ie={class:"q-pa-md",style:{"max-width":"300px"}},Ee={class:"row items-center justify-end"},Ue=z(()=>r("span",{class:"text-required q-pb-sm"},[U("Todos los campos con "),r("span",{class:"text-red"},"*"),U(" son obligatorios")],-1)),Be={class:"row justify-center"},Ae={__name:"People",setup(a){const u=de(),P=["M","F","I"],C=["1","2","3"],M=["a+","a+","ab+","ab-","b+","b-","o+","o-"],R=["1","2","3","4","5","6"],T=s(!1),D=s("");let g=s(""),p=s(""),S=s(""),v=s(""),F=s(""),y=s(""),_=s(null),q=s(null),V=s(null),h=s(""),f=s(""),W=me(()=>p.value=="");const i=[l=>!!l||"Este campo es requerido"],N=s([]),G=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"typeDocument",label:"Tipo",field:"typeDocument",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"document",label:"Número Documento",field:"document",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"lastName",label:"Apellido",field:"lastName",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"birthDay",label:"Fecha de Nacimiento",field:"birthDay",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"phone",label:"Teléfono",field:"phone",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"eps",label:"Eps",field:"eps",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"bloodType",label:"Tipo de Sangre",field:"bloodType",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),j=()=>{u.toggleModal(),D.value="",g.value="",p.value="",v.value="",F.value="",y.value="",_.value="",q.value="",V.value="",h.value="",f.value=""},L=l=>{D.value=l},H=l=>{g.value=l},J=l=>{p.value=l},K=l=>{v.value=l},Q=l=>{y.value=l},X=l=>{_.value=l},Y=l=>{q.value=l},Z=l=>{V.value=l},$=l=>{h.value=l},ee=l=>{f.value=l},le=()=>{te(),u.toggleModal()},te=async()=>{await Pe({name:p.value,description:f.value}),O()},O=async()=>{T.value=!0;const{people:l}=await xe();let t=1;l.forEach(c=>{c.status=c.status?"Inactivo":"Activo",c.id=t++,c.description=c.description.trim()==""?"No registra":c.description}),N.value=l,T.value=!1};return fe(()=>{O()}),(l,t)=>{const c=m("q-separator"),k=m("q-icon"),I=m("q-input"),oe=m("q-table"),ae=m("q-btn"),se=m("q-date"),ne=m("q-popup-proxy"),x=m("q-select"),re=be("close-popup");return E(),ge(_e,null,[r("div",Te,[ze,o(c,{class:"separator"}),o(ie,{onOnClick:j,label:"Crear nueva persona"}),r("div",De,[o(oe,{flat:"",bordered:"",title:"Personas","row-key":"name",rows:N.value,columns:G.value,filter:n(S),loading:T.value,"rows-per-page-options":[5,10,20]},{"top-right":b(()=>[o(I,{borderless:"",dense:"",debounce:"300",modelValue:n(S),"onUpdate:modelValue":t[0]||(t[0]=e=>d(S)?S.value=e:S=e),placeholder:"Search"},{append:b(()=>[o(k,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"])])]),n(u).modalIsOpen?(E(),ve(ue,{key:0},{default:b(()=>[Ne,r("div",Oe,[r("div",ke,[o(Ve,{class:"q-mb-lg",onOnSelect:L,style:qe(l.selectStyles),type:"documents",label:"Tipo de Documento"},null,8,["style"]),o(w,{class:"q-pb-xs",label:"Número de Documento",required:!0,type:"text",ruless:i,modelValue:n(g),"onUpdate:modelValue":t[1]||(t[1]=e=>d(g)?g.value=e:g=e),onOnWrite:H},null,8,["modelValue"]),o(w,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:i,modelValue:n(p),"onUpdate:modelValue":t[2]||(t[2]=e=>d(p)?p.value=e:p=e),onOnWrite:J},null,8,["modelValue"]),o(w,{class:"q-pb-xs",label:"Apellido",required:!0,type:"text",ruless:i,modelValue:n(v),"onUpdate:modelValue":t[3]||(t[3]=e=>d(v)?v.value=e:v=e),onOnWrite:K},null,8,["modelValue"]),r("div",Ie,[o(I,{filled:"",modelValue:l.date,"onUpdate:modelValue":t[5]||(t[5]=e=>l.date=e),mask:"date",rules:["date"]},{append:b(()=>[o(k,{name:"event",class:"cursor-pointer"},{default:b(()=>[o(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[o(se,{modelValue:l.date,"onUpdate:modelValue":t[4]||(t[4]=e=>l.date=e)},{default:b(()=>[r("div",Ee,[he(o(ae,{label:"Close",color:"primary",flat:""},null,512),[[re]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(w,{class:"q-pb-xs",label:"Teléfono",required:!0,type:"text",ruless:i,modelValue:n(y),"onUpdate:modelValue":t[6]||(t[6]=e=>d(y)?y.value=e:y=e),onOnWrite:Q},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Genero",required:!0,type:"text",ruless:i,modelValue:n(_),"onUpdate:modelValue":t[7]||(t[7]=e=>d(_)?_.value=e:_=e),options:P,onOnSelect:X},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"EPS",required:!0,type:"text",ruless:i,modelValue:n(q),"onUpdate:modelValue":t[8]||(t[8]=e=>d(q)?q.value=e:q=e),options:C,onOnSelect:Y},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Sangre",required:!0,type:"text",ruless:i,modelValue:n(V),"onUpdate:modelValue":t[9]||(t[9]=e=>d(V)?V.value=e:V=e),options:M,onOnSelect:Z},null,8,["modelValue"]),o(x,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Persona",required:!0,type:"text",ruless:i,modelValue:n(h),"onUpdate:modelValue":t[10]||(t[10]=e=>d(h)?h.value=e:h=e),options:R,onOnSelect:$},null,8,["modelValue"]),o(w,{class:"q-mb-lgs",label:"Descripción",required:!1,type:"text",ruless:i,modelValue:n(f),"onUpdate:modelValue":t[11]||(t[11]=e=>d(f)?f.value=e:f=e),onOnWrite:ee},null,8,["modelValue"]),Ue,r("div",Be,[o(pe,{disable:n(W),onOnClick:le},null,8,["disable"])])])])]),_:1})):ye("",!0)],64)}}},Re=ce(Ae,[["__scopeId","data-v-98ca1831"]]);export{Re as default};
