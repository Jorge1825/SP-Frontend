import{x as h,_ as D,f as u,h as F,m as T,r as _,o as x,c as U,a as o,d as c,i as p,g as P,w as j,j as W,F as G,q as f,s as y,p as z,e as H,v as w}from"./index-a0c708ca.js";import{g as k,m as J,M as K,B as L,a as Q}from"./ModalForm-cb6eb8ec.js";const X=async()=>{try{const e=k(),{data:n}=await h.get("/inventory/brands",{headers:{token:e}});return n}catch(e){console.error(e)}},Y=async e=>{try{const n=k(),{data:m}=await h.post("/inventory/brands/register",{name:e.name,farm:e.farm,description:e.description},{headers:{token:n}});return m}catch(n){console.error(n)}};const b=e=>(z("data-v-b03d99f0"),e=e(),H(),e),Z={class:"q-py-md table-container"},$=b(()=>o("h6",{class:"q-my-lg"},"MARCAS",-1)),ee={class:"container-content"},ae={class:"container-table q-mt-lg q-pa-md",rounded:""},te=b(()=>o("h6",{class:"q-my-md text-center"},"REGISTRAR MARCA",-1)),se={class:"row q-px-xl"},oe={class:"col-12"},ne=b(()=>o("span",{class:"text-required q-pb-sm"},[w("Todos los campos con "),o("span",{class:"text-red"},"*"),w(" son obligatorios")],-1)),le={class:"row justify-center"},re={__name:"Brands",setup(e){const n=J(),m=["1","2","3"];let i=u(null),l=u(""),d=u(""),V=F(()=>l.value=="");const g=[a=>!!a||"Este campo es requerido"],v=u([]),S=u([{name:"id",label:"#",field:"id",align:"left",sortable:!0},{name:"farm",label:"Finca",field:"farm",align:"left",sortable:!0},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0}]),q=u({page:1,rowsPerPage:10,sortBy:"id",descending:!1}),I=()=>{n.toggleModal(),i.value="",l.value="",d.value=""},A=a=>{l.value=a},C=a=>{d.value=a},E=a=>{i.value=a},M=()=>{N(),n.toggleModal()},N=async()=>{await Y({name:l.value,description:d.value}),B()},B=async()=>{const{brands:a}=await X();let t=1;a.forEach(r=>{r.status=r.status?"Inactivo":"Activo",r.id=t++,r.description=r.description.trim()==""?"No registra":r.description}),v.value=a};return T(()=>{B()}),(a,t)=>{const r=_("q-separator"),O=_("q-table"),R=_("q-select");return x(),U(G,null,[o("div",Z,[$,c(r,{class:"separator"}),o("div",ee,[c(L,{onOnClick:I,label:"Crear nueva marca"}),o("div",ae,[c(O,{flat:"",bordered:"",title:"Marcas",rows:v.value,columns:S.value,"row-key":"name",pagination:q.value,"onUpdate:pagination":t[0]||(t[0]=s=>q.value=s)},null,8,["rows","columns","pagination"])])])]),p(n).modalIsOpen?(x(),P(K,{key:0},{default:j(()=>[te,o("div",se,[o("div",oe,[c(R,{class:"q-mb-lg",filled:"",dense:"",label:"EPS",required:!0,type:"text",ruless:g,modelValue:p(i),"onUpdate:modelValue":t[1]||(t[1]=s=>f(i)?i.value=s:i=s),options:m,onOnSelect:E},null,8,["modelValue"]),c(y,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:g,modelValue:p(l),"onUpdate:modelValue":t[2]||(t[2]=s=>f(l)?l.value=s:l=s),onOnWrite:A},null,8,["modelValue"]),c(y,{label:"Descripción",type:"text",required:!1,modelValue:p(d),"onUpdate:modelValue":t[3]||(t[3]=s=>f(d)?d.value=s:d=s),onOnWrite:C},null,8,["modelValue"]),ne,o("div",le,[c(Q,{disable:p(V),onOnClick:M},null,8,["disable"])])])])]),_:1})):W("",!0)],64)}}},ie=D(re,[["__scopeId","data-v-b03d99f0"]]);export{ie as default};
