import{_ as R,g as d,m as E,u as B,f as I,ag as O,r as g,o as y,c as k,a as s,d as p,w as h,h as $,i as C,j as D,R as P,C as b,p as T,e as U,ae as j}from"./index-38b4e5a2.js";import{c as z}from"./index-46426b6c.js";const n=m=>(T("data-v-aa034c50"),m=m(),U(),m),A={class:"row background-sugar"},K={class:"col-md-6 col-12 window-height bg-white q-pa-md"},W=n(()=>s("div",{class:"row"},[s("img",{class:"image-size",src:j,alt:"Logo trapiche"})],-1)),G={class:"form-container column justify-center items-center"},H={class:"form column"},M=n(()=>s("h3",{class:"q-mb-md"},"Recupera tu contraseña",-1)),Q=n(()=>s("h5",{class:"text-grey q-mt-xs q-mb-md"},"Ingresa tu nueva contraseña",-1)),F=n(()=>s("span",null,[b("Contraseña "),s("label",{class:"text-red"},"*")],-1)),J=n(()=>s("span",null,[b("Confirmar contraseña "),s("label",{class:"text-red"},"*")],-1)),X={key:2,class:"spinner"},Y=n(()=>s("div",{class:"col-md-6 col-0 window-height"},null,-1)),Z={__name:"NewPassword",props:{error:{type:Boolean,required:!1,default:!1}},setup(m){const a=d(!0),S=E(),q=B(),o=d(""),r=d("");let _=null;const v=d(!0),x=()=>{o.value!=r.value?v.value=!1:v.value=!0},V=I(()=>o.value===""||r.value===""||o.value!=r.value);O(()=>{_=q.currentRoute.value.params.token,(_==null||_=="")&&q.replace("/")});const f=d(!1),w=(l,e)=>{S.notify({type:l,message:e,position:"top"})};async function N(){var l,e,i;f.value=!0;try{const t=await z({token:_,password:o.value});f.value=!1;let c=(i=(e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.errors[0])==null?void 0:i.msg;c==P.LENGTHPASSWORD?w("negative","La contraseña debe tener de 6 a 20 carácteres"):c==P.RULESPASSWORD?w("negative","La contraseña debe tener una letra mayúscula, una letra minúscula y un número"):(w("positive","Contraseña cambiada con exito"),setTimeout(()=>{q.push({name:"sign-in"})},2e3))}catch{f.value=!1,w("negative","Ocurrió un error, por favor verifique los datos")}}return(l,e)=>{const i=g("q-icon"),t=g("q-input"),c=g("q-btn"),L=g("q-spinner-ios");return y(),k("section",A,[s("div",K,[W,s("div",G,[s("div",H,[M,Q,F,p(t,{dense:"",filled:"",type:a.value?"password":"text","error-message":"Las contraseñas no coinciden",error:!v.value,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=u=>o.value=u),onKeyup:x},{append:h(()=>[p(i,{name:a.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=u=>a.value=!a.value)},null,8,["name"])]),_:1},8,["type","error","modelValue"]),J,p(t,{dense:"",filled:"",type:a.value?"password":"text","error-message":"Las contraseñas no coinciden",error:!v.value,modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=u=>r.value=u),onKeyup:x},{append:h(()=>[p(i,{name:a.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=u=>a.value=!a.value)},null,8,["name"])]),_:1},8,["type","error","modelValue"]),$(V)?(y(),C(c,{key:0,disable:"",class:"btn-login text-white full-width q-mt-none"},{default:h(()=>[b("Enviar")]),_:1})):(y(),C(c,{key:1,onClick:N,class:"btn-login text-white full-width q-mt-none"},{default:h(()=>[b("Enviar")]),_:1})),f.value?(y(),k("div",X,[p(L,{color:"primary",size:"2.5em"})])):D("",!0)])])]),Y])}}},ae=R(Z,[["__scopeId","data-v-aa034c50"]]);export{ae as default};
