import{s as I,_ as R,f as d,h as W,l as j,r as f,o as V,c as G,a as l,d as s,w as q,i as c,g as H,j as J,F as K,m as _,q as y,p as L,e as Q,v as k}from"./index-85c6c6a3.js";import{g as z,B as X}from"./ButtonAdd-59c43077.js";import{m as Y,M as Z,B as $}from"./ButtonSave-c0735596.js";const ee=async()=>{try{const t=z(),{data:n}=await I.get("/maintenance/stages",{headers:{token:t}});return n}catch(t){console.error(t)}},te=async t=>{try{const n=z(),{data:v}=await I.post("/maintenance/stages/register",{name:t.name,description:t.description,father:t.father},{headers:{token:n}});return v}catch(n){console.error(n)}};const S=t=>(L("data-v-a0b4cc9b"),t=t(),Q(),t),ae={class:"q-py-md table-container"},oe=S(()=>l("h6",{class:"title q-my-lg"},"TIPOS ETAPAS",-1)),se={class:"container-content"},le={class:"container-table q-mt-md q-pa-md",rounded:""},ne=S(()=>l("h6",{class:"q-my-md text-center"},"REGISTRAR ETAPA",-1)),re={class:"row q-px-xl"},ie={class:"col-12"},de=S(()=>l("span",{class:"text-required q-pb-sm"},[k("Todos los campos con "),l("span",{class:"text-red"},"*"),k(" son obligatorios")],-1)),ce={class:"row justify-center"},ue={__name:"Stages",setup(t){const n=Y(),v=["1","2","3","4","5"],h=d(!1);let g=d(null),r=d(""),p=d(""),u=d(""),m=d(""),E=W(()=>r.value=="");const b=[o=>!!o||"Este campo es requerido"],x=d([]),B=d([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"father",label:"Padre",field:"father",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),A=()=>{n.toggleModal(),r.value="",u.value="",m.value=""},N=o=>{r.value=o},O=o=>{u.value=o},T=o=>{m.value=o},C=()=>{D(),n.toggleModal()},D=async()=>{await te({name:r.value,description:u.value}),w()},w=async()=>{h.value=!0;const{stages:o}=await ee();let a=1;o.forEach(i=>{i.status=i.status?"Inactivo":"Activo",i.id=a++,i.description=i.description.trim()==""?"No registra":i.description}),x.value=o,h.value=!1};return j(()=>{w()}),(o,a)=>{const i=f("q-separator"),F=f("q-icon"),M=f("q-input"),P=f("q-table"),U=f("q-select");return V(),G(K,null,[l("div",ae,[oe,s(i,{class:"separator"}),l("div",se,[s(X,{onOnClick:A,label:"Crear nueva etapa"}),l("div",le,[s(P,{flat:"",bordered:"",title:"Etapas","row-key":"name",rows:x.value,columns:B.value,filter:c(p),loading:h.value,"rows-per-page-options":[5,10,20]},{"top-right":q(()=>[s(M,{borderless:"",dense:"",debounce:"300",modelValue:c(p),"onUpdate:modelValue":a[0]||(a[0]=e=>_(p)?p.value=e:p=e),placeholder:"Search"},{append:q(()=>[s(F,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"])])])]),c(n).modalIsOpen?(V(),H(Z,{key:0},{default:q(()=>[ne,l("div",re,[l("div",ie,[s(U,{class:"q-pb-xs",filled:"",dense:"",label:"Finca",required:!0,type:"text",ruless:b,modelValue:c(g),"onUpdate:modelValue":a[1]||(a[1]=e=>_(g)?g.value=e:g=e),options:v},null,8,["modelValue"]),s(y,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:b,modelValue:c(r),"onUpdate:modelValue":a[2]||(a[2]=e=>_(r)?r.value=e:r=e),onOnWrite:N},null,8,["modelValue"]),s(y,{class:"q-pb-xs",label:"Descripción",type:"text",required:!1,ruless:b,modelValue:c(u),"onUpdate:modelValue":a[3]||(a[3]=e=>_(u)?u.value=e:u=e),onOnWrite:O},null,8,["modelValue"]),s(y,{label:"Padre",required:!0,type:"text",ruless:b,modelValue:c(m),"onUpdate:modelValue":a[4]||(a[4]=e=>_(m)?m.value=e:m=e),onOnWrite:T},null,8,["modelValue"]),de,l("div",ce,[s($,{disable:c(E),onOnClick:C},null,8,["disable"])])])])]),_:1})):J("",!0)],64)}}},_e=R(ue,[["__scopeId","data-v-a0b4cc9b"]]);export{_e as default};
