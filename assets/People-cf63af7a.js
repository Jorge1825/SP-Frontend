import{g as C,B as ie}from"./ButtonAdd-1e3a5e63.js";import{l as F,s as M,_ as ue,m as pe,f as s,h as ce,v as me,r as m,C as fe,o as B,c as ge,a as r,d as o,w as g,i as n,g as be,M as ve,j as ye,F as _e,x as d,D as qe,E as Ve,y as x,G as Se,B as he,p as we,e as xe,z as A}from"./index-9b0f9ebe.js";const Pe=async()=>{try{const a=C(),P=F().idSelected,{data:h}=await M.get("/maintenance/people",{headers:{token:a,farm:P}});return h}catch(a){console.error(a)}},Te=async a=>{try{const u=C(),h=F().idSelected,{data:z}=await M.post("/maintenance/people/register",{document:a.document,name:a.name,lastName:a.lastName,description:a.description,birthDate:a.birthDate,phone:a.phone,bloodType:a.bloodType,peopleType:a.peopleType},{headers:{token:u,farm:h}});return z}catch(u){console.error(u)}};const N=a=>(we("data-v-67a629d4"),a=a(),xe(),a),ze={class:"q-py-md table-container"},De=N(()=>r("h6",{class:"title q-my-lg"},"PERSONAS",-1)),Ne={class:"container-table q-mt-md q-pa-md",rounded:""},Oe=N(()=>r("h6",{class:"q-my-md text-center"},"REGISTRAR PERSONA",-1)),ke={class:"row q-px-xl"},Ee={class:"col-12"},Ie={class:"q-pa-md",style:{"max-width":"300px"}},Ue={class:"row items-center justify-end"},Be=N(()=>r("span",{class:"text-required q-pb-sm"},[A("Todos los campos con "),r("span",{class:"text-red"},"*"),A(" son obligatorios")],-1)),Ae={class:"row justify-center"},Ce={__name:"People",setup(a){const u=pe(),P=["M","F","I"],h=["1","2","3"],z=["a+","a+","ab+","ab-","b+","b-","o+","o-"],R=["1","2","3","4","5","6"],D=s(!1),O=s("");let b=s(""),p=s(""),w=s(""),v=s(""),G=s(""),y=s(""),_=s(null),q=s(null),V=s(null),S=s(""),f=s(""),W=ce(()=>p.value=="");const i=[l=>!!l||"Este campo es requerido"],k=s([]),j=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"typeDocument",label:"Tipo",field:"typeDocument",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"document",label:"Número Documento",field:"document",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"lastName",label:"Apellido",field:"lastName",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"birthDay",label:"Fecha de Nacimiento",field:"birthDay",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"phone",label:"Teléfono",field:"phone",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"eps",label:"Eps",field:"eps",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"bloodType",label:"Tipo de Sangre",field:"bloodType",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),L=()=>{u.toggleModal(),O.value="",b.value="",p.value="",v.value="",G.value="",y.value="",_.value="",q.value="",V.value="",S.value="",f.value=""},H=l=>{O.value=l},J=l=>{b.value=l},K=l=>{p.value=l},Q=l=>{v.value=l},X=l=>{y.value=l},Y=l=>{_.value=l},Z=l=>{q.value=l},$=l=>{V.value=l},ee=l=>{S.value=l},le=l=>{f.value=l},te=()=>{oe(),u.toggleModal()},oe=async()=>{await Te({name:p.value,description:f.value}),E()},E=async()=>{D.value=!0;const{people:l}=await Pe();let t=1;l.forEach(c=>{c.status=c.status?"Inactivo":"Activo",c.id=t++,c.description=c.description.trim()==""?"No registra":c.description}),k.value=l,D.value=!1};return me(()=>{E()}),(l,t)=>{const c=m("q-separator"),I=m("q-icon"),U=m("q-input"),ae=m("q-table"),se=m("q-btn"),ne=m("q-date"),re=m("q-popup-proxy"),T=m("q-select"),de=fe("close-popup");return B(),ge(_e,null,[r("div",ze,[De,o(c,{class:"separator"}),o(ie,{onOnClick:L,label:"Crear nueva persona"}),r("div",Ne,[o(ae,{flat:"",bordered:"",title:"Personas","row-key":"name",rows:k.value,columns:j.value,filter:n(w),loading:D.value,"rows-per-page-options":[5,10,20]},{"top-right":g(()=>[o(U,{borderless:"",dense:"",debounce:"300",modelValue:n(w),"onUpdate:modelValue":t[0]||(t[0]=e=>d(w)?w.value=e:w=e),placeholder:"Search"},{append:g(()=>[o(I,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"])])]),n(u).modalIsOpen?(B(),be(ve,{key:0},{default:g(()=>[Oe,r("div",ke,[r("div",Ee,[o(Ve,{class:"q-mb-lg",onOnSelect:H,style:qe(l.selectStyles),type:"documents",label:"Tipo de Documento"},null,8,["style"]),o(x,{class:"q-pb-xs",label:"Número de Documento",required:!0,type:"text",ruless:i,modelValue:n(b),"onUpdate:modelValue":t[1]||(t[1]=e=>d(b)?b.value=e:b=e),onOnWrite:J},null,8,["modelValue"]),o(x,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:i,modelValue:n(p),"onUpdate:modelValue":t[2]||(t[2]=e=>d(p)?p.value=e:p=e),onOnWrite:K},null,8,["modelValue"]),o(x,{class:"q-pb-xs",label:"Apellido",required:!0,type:"text",ruless:i,modelValue:n(v),"onUpdate:modelValue":t[3]||(t[3]=e=>d(v)?v.value=e:v=e),onOnWrite:Q},null,8,["modelValue"]),r("div",Ie,[o(U,{filled:"",modelValue:l.date,"onUpdate:modelValue":t[5]||(t[5]=e=>l.date=e),mask:"date",rules:["date"]},{append:g(()=>[o(I,{name:"event",class:"cursor-pointer"},{default:g(()=>[o(re,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[o(ne,{modelValue:l.date,"onUpdate:modelValue":t[4]||(t[4]=e=>l.date=e)},{default:g(()=>[r("div",Ue,[Se(o(se,{label:"Close",color:"primary",flat:""},null,512),[[de]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(x,{class:"q-pb-xs",label:"Teléfono",required:!0,type:"text",ruless:i,modelValue:n(y),"onUpdate:modelValue":t[6]||(t[6]=e=>d(y)?y.value=e:y=e),onOnWrite:X},null,8,["modelValue"]),o(T,{class:"q-mb-lg",filled:"",dense:"",label:"Genero",required:!0,type:"text",ruless:i,modelValue:n(_),"onUpdate:modelValue":t[7]||(t[7]=e=>d(_)?_.value=e:_=e),options:P,onOnSelect:Y},null,8,["modelValue"]),o(T,{class:"q-mb-lg",filled:"",dense:"",label:"EPS",required:!0,type:"text",ruless:i,modelValue:n(q),"onUpdate:modelValue":t[8]||(t[8]=e=>d(q)?q.value=e:q=e),options:h,onOnSelect:Z},null,8,["modelValue"]),o(T,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Sangre",required:!0,type:"text",ruless:i,modelValue:n(V),"onUpdate:modelValue":t[9]||(t[9]=e=>d(V)?V.value=e:V=e),options:z,onOnSelect:$},null,8,["modelValue"]),o(T,{class:"q-mb-lg",filled:"",dense:"",label:"Tipo de Persona",required:!0,type:"text",ruless:i,modelValue:n(S),"onUpdate:modelValue":t[10]||(t[10]=e=>d(S)?S.value=e:S=e),options:R,onOnSelect:ee},null,8,["modelValue"]),o(x,{class:"q-mb-lgs",label:"Descripción",required:!1,type:"text",ruless:i,modelValue:n(f),"onUpdate:modelValue":t[11]||(t[11]=e=>d(f)?f.value=e:f=e),onOnWrite:le},null,8,["modelValue"]),Be,r("div",Ae,[o(he,{disable:n(W),onOnClick:te},null,8,["disable"])])])])]),_:1})):ye("",!0)],64)}}},Re=ue(Ce,[["__scopeId","data-v-67a629d4"]]);export{Re as default};
