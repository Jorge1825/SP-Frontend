import{g as q,B as oe}from"./ButtonAdd-59c43077.js";import{s as w,_ as ne,f as c,h as se,x as le,l as ie,r as u,o as P,c as ce,a as d,d as t,w as l,i as r,g as E,j as re,F as de,m as b,t as pe,q as j,p as ue,e as me,v as F}from"./index-85c6c6a3.js";import{m as ye,M as ve,B as W}from"./ButtonSave-c0735596.js";const _e=async()=>{try{const o=q(),{data:e}=await w.get("/maintenance/pays",{headers:{token:o}});return e}catch(o){console.error(o)}},fe=async o=>{try{const e=q(),{data:p}=await w.post("/maintenance/pays/register",{name:o.name,description:o.description},{headers:{token:e}});return p}catch(e){console.error(e)}},ge=async o=>{try{const e=q(),{data:p}=await w.put(`/maintenance/pays/update/${o.id}`,{name:o.name,description:o.description},{headers:{token:e}});return p}catch(e){console.error(e)}},be=async o=>{try{const e=q(),{data:p}=await w.put(`/maintenance/pays/inactive/${o}`,{},{headers:{token:e}});return p}catch(e){console.error(e)}},he=async o=>{console.log(o);try{const e=q(),{data:p}=await w.put(`/maintenance/pays/active/${o}`,{},{headers:{token:e}});return p}catch(e){console.error(e)}};const C=o=>(ue("data-v-b4d7b3db"),o=o(),me(),o),qe={class:"q-py-md table-container"},we=C(()=>d("h6",{class:"title q-my-lg"},"TIPOS DE PAGO",-1)),xe={class:"container-content"},ke={class:"container-table q-mt-md q-pa-md",rounded:""},Te={style:{padding:"0px",margin:"0px","min-width":"100px","max-width":"100px"}},Pe={style:{padding:"0px",margin:"0px","min-width":"100px","max-width":"20px"}},Ve=C(()=>d("i",{class:"icon icon-check"},null,-1)),Ie={class:"q-my-md text-center"},Ae={class:"row q-px-xl"},Se={class:"col-12"},Ee=C(()=>d("span",{class:"text-required q-py-sm"},[F("Todos los campos con "),d("span",{class:"text-red"},"*"),F(" son obligatorios")],-1)),Ce={class:"row justify-center"},Ne={__name:"TypePays",setup(o){const e=ye(),p=c(""),x=c(!1),V=c(!0),g=c([]),k=c([]),N=c(),O=se(()=>y.value==""),$=[n=>!!n||"Este campo es requerido"];let m=c(""),y=c(""),_=c(""),I=c(""),A=c(""),f=c("active");const v=le(),z=c([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),Q=()=>{p.value="REGISTRAR TIPO DE PAGO",A.value="",I.value="",V.value=!0,e.toggleModal(),y.value="",_.value=""},H=n=>{y.value=n},J=n=>{_.value=n},K=n=>{p.value="EDITAR TIPO DE PAGO",V.value=!1,N.value=n._id,A.value=n.description,I.value=n.name,e.toggleModal()};async function L(n){try{const s=await be(n);v.notify({type:"positive",message:"Tipo de pago inactivado correctamente",position:"top"}),g.value=[],k.value=[],h()}catch{v.notify({type:"negative",message:"No se pudo inactivar el tipo de pago",position:"top"})}}async function X(){e.toggleModal();try{const n=await fe({name:y.value,description:_.value});v.notify({type:"positive",message:"Tipo de pago registrado correctamente",position:"top"}),g.value=[],h()}catch{v.notify({type:"negative",message:"No se pudo registrar el tipo de pago",position:"top"})}}async function h(){x.value=!0;try{const{pays:n}=await _e();let s=1,T=1;n.forEach(i=>{i.status=i.status?"Inactivo":"Activo",i.status=="Activo"?(i.id=s++,g.value.push(i)):(i.id=T++,k.value.push(i)),i.description=i.description.trim()==""?"No registra":i.description}),x.value=!1}catch{v.notify({type:"negative",message:"No se pudo obtener los tipos de pago",position:"top"})}}async function Y(){try{const n=await ge({id:N.value,name:y.value,description:_.value});v.notify({type:"positive",position:"top",message:"Tipo de pago actualizado correctamente"}),e.toggleModal(),g.value=[],h()}catch{v.notify({type:"negative",position:"top",message:"No se pudo actualizar el tipo de pago"})}}async function Z(n){try{const s=await he(n);v.notify({type:"positive",message:"Tipo de pago activado correctamente",position:"top"}),g.value=[],k.value=[],h()}catch{v.notify({type:"negative",message:"Ocurrió un error"})}}return ie(()=>{h()}),(n,s)=>{const T=u("q-separator"),i=u("q-tab"),ee=u("q-tabs"),D=u("q-icon"),M=u("q-input"),S=u("q-btn"),B=u("q-btn-group"),R=u("q-table"),U=u("q-tab-panel"),te=u("q-tab-panels"),ae=u("q-card");return P(),ce(de,null,[d("div",qe,[we,t(T,{class:"separator"}),d("div",xe,[t(oe,{onOnClick:Q,label:"Crear tipo de pago"}),d("div",ke,[t(ae,null,{default:l(()=>[t(ee,{modelValue:r(f),"onUpdate:modelValue":s[0]||(s[0]=a=>b(f)?f.value=a:f=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[t(i,{name:"active",label:"Activos"}),t(i,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(T),t(te,{modelValue:r(f),"onUpdate:modelValue":s[3]||(s[3]=a=>b(f)?f.value=a:f=a),animated:""},{default:l(()=>[t(U,{name:"active"},{default:l(()=>[t(R,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:g.value,columns:z.value,filter:r(m),loading:x.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(M,{borderless:"",dense:"",debounce:"300",modelValue:r(m),"onUpdate:modelValue":s[1]||(s[1]=a=>b(m)?m.value=a:m=a),placeholder:"Search"},{append:l(()=>[t(D,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(a=>[d("td",Te,[t(B,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(S,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:G=>K(a.row)},null,8,["onClick"]),t(S,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:G=>L(a.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(U,{name:"inactive"},{default:l(()=>[t(R,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:k.value,columns:z.value,filter:r(m),loading:x.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(M,{borderless:"",dense:"",debounce:"300",modelValue:r(m),"onUpdate:modelValue":s[2]||(s[2]=a=>b(m)?m.value=a:m=a),placeholder:"Search"},{append:l(()=>[t(D,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(a=>[d("td",Pe,[t(B,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(S,{"text-color":"blue-10",class:"col q-pa-none",onClick:G=>Z(a.row._id)},{default:l(()=>[Ve]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(e).modalIsOpen?(P(),E(ve,{key:0},{default:l(()=>[d("h6",Ie,pe(p.value),1),d("div",Ae,[d("div",Se,[t(j,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:$,value:r(I),modelValue:r(y),"onUpdate:modelValue":s[4]||(s[4]=a=>b(y)?y.value=a:y=a),onOnWrite:H},null,8,["value","modelValue"]),t(j,{label:"Descripción",type:"text",required:!1,value:r(A),modelValue:r(_),"onUpdate:modelValue":s[5]||(s[5]=a=>b(_)?_.value=a:_=a),onOnWrite:J},null,8,["value","modelValue"]),Ee,d("div",Ce,[V.value?(P(),E(W,{key:0,disable:r(O),onOnClick:X},null,8,["disable"])):(P(),E(W,{key:1,disable:r(O),onOnClick:Y},null,8,["disable"]))])])])]),_:1})):re("",!0)],64)}}},Me=ne(Ne,[["__scopeId","data-v-b4d7b3db"]]);export{Me as default};
