import{_ as pe,m as fe,q as _e,g as s,v as me,f as L,x as be,y as ge,r as c,o as V,c as Q,a as n,d as t,w as i,h as r,i as M,M as qe,j as H,F as ye,S as he,z as q,t as we,A as N,B as J,p as Ee,e as Ve,C as K,T as Se,U as ke,V as xe,W as Ie}from"./index-6c614867.js";import{B as Oe}from"./ButtonAdd-91711192.js";const B=S=>(Ee("data-v-296425cd"),S=S(),Ve(),S),Ce={class:"q-py-sm table-container"},ze={class:"row"},Ae=B(()=>n("h6",{class:"title q-my-lg"},"EPS",-1)),Me={class:"container-content"},Ne={class:"container-table q-mt-md q-pa-md",rounded:""},Be={class:"accions-td"},De={class:"accions-td"},Ue=B(()=>n("i",{class:"icon icon-check"},null,-1)),Re={class:"modal-eps"},Pe={class:"q-my-md text-center"},Fe={class:"row q-px-xl"},Te={class:"col-12"},We=B(()=>n("span",{class:"text-required q-pb-sm"},[K("Todos los campos con "),n("span",{class:"text-red"},"*"),K(" son obligatorios")],-1)),je={class:"row justify-center"},Ge={key:0,class:"spinner"},Le={__name:"Eps",setup(S){const X=fe(),w=_e(),x=s(""),u=s(!1),I=s(!0),g=s([]),E=s([]),D=s(),Y=me(),m=s(!1),U=L(()=>d.value==""?!0:m.value==!0),Z=[e=>!!e||"Este campo es requerido"];let v=s(""),b=s("active"),d=s(""),p=s(""),f=s(""),O=s(""),C=s(""),z=s("");const R=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"observation",label:"Observación",field:"observation",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),$=e=>{d.value=e},ee=e=>{p.value=e},ae=e=>{f.value=e},te=()=>{x.value="REGISTRAR EPS",oe(),I.value=!0,w.toggleModal()},oe=()=>{O.value="",C.value="",z.value="",d.value="",p.value="",f.value=""},le=e=>{x.value="EDITAR EPS",I.value=!1,D.value=e._id,O.value=e.name,C.value=e.description,z.value=e.observation,d.value=e.name,p.value=e.description,f.value=e.observation,w.toggleModal()},_=(e,o)=>{X.notify({type:e,message:o,position:"top"})},y=async()=>{g.value=[],E.value=[],u.value=!0;try{const{eps:e}=await he(h.value);let o=1,k=1;e.forEach(l=>{l.status=l.status?"Inactivo":"Activo",l.status=="Activo"?(l.id=o++,g.value.push(l)):(l.id=k++,E.value.push(l)),l.description=l.description.trim()==""?"No registra":l.description,l.observation=l.observation.trim()==""?"No registra":l.observation}),u.value=!1}catch{u.value=!1,_("negative","Ocurrió un error")}};async function se(){m.value=!0;try{const e=await Se({name:d.value,description:p.value,observation:f.value},h.value);m.value=!1,_("positive","Eps registrada correctamente"),w.toggleModal(),g.value=[],y()}catch{m.value=!1,_("negative","Ocurrió un error, por favor verifique los datos")}}async function ne(){m.value=!0;try{const e=await ke({id:D.value,name:d.value,description:p.value,observation:f.value},h.value);m.value=!1,_("positive","Eps actualizada correctamente"),w.toggleModal(),g.value=[],y()}catch{m.value=!1,_("negative","Ocurrió un error, por favor verifique los datos")}d.value="",p.value="",f.value=""}async function ie(e){u.value=!0;try{const o=await xe(e,h.value);_("positive","Eps activada correctamente"),u.value=!1,g.value=[],E.value=[],y()}catch{u.value=!1,_("negative","Ocurrió un error")}}async function re(e){u.value=!1;try{const o=await Ie(e,h.value);u.value=!1,_("positive","Eps desactivada correctamente"),g.value=[],E.value=[],y()}catch{u.value=!1,_("negative","Ocurrió un error")}}const h=L(()=>Y.idSelected);return be(h,()=>{y()}),ge(()=>{y()}),(e,o)=>{const k=c("q-separator"),l=c("q-tab"),ce=c("q-tabs"),P=c("q-icon"),F=c("q-input"),A=c("q-btn"),T=c("q-btn-group"),W=c("q-table"),j=c("q-tab-panel"),ue=c("q-tab-panels"),de=c("q-card"),ve=c("q-spinner-ios");return V(),Q(ye,null,[n("div",Ce,[n("div",ze,[n("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=a=>e.$router.back())}),Ae]),t(k,{class:"separator"}),n("div",Me,[t(Oe,{onOnClick:te,label:"Crear nueva EPS"}),n("div",Ne,[t(de,null,{default:i(()=>[t(ce,{modelValue:r(b),"onUpdate:modelValue":o[1]||(o[1]=a=>q(b)?b.value=a:b=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[t(l,{name:"active",label:"Activos"}),t(l,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(k),t(ue,{modelValue:r(b),"onUpdate:modelValue":o[4]||(o[4]=a=>q(b)?b.value=a:b=a),animated:""},{default:i(()=>[t(j,{name:"active"},{default:i(()=>[t(W,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:g.value,columns:R.value,filter:r(v),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(F,{borderless:"",dense:"",debounce:"300",modelValue:r(v),"onUpdate:modelValue":o[2]||(o[2]=a=>q(v)?v.value=a:v=a),placeholder:"Search"},{append:i(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(a=>[n("td",Be,[t(T,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(A,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:G=>le(a.row)},null,8,["onClick"]),t(A,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:G=>re(a.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(j,{name:"inactive"},{default:i(()=>[t(W,{flat:"",bordered:"",title:"EPS","row-key":"name",rows:E.value,columns:R.value,filter:r(v),loading:u.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(F,{borderless:"",dense:"",debounce:"300",modelValue:r(v),"onUpdate:modelValue":o[3]||(o[3]=a=>q(v)?v.value=a:v=a),placeholder:"Search"},{append:i(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(a=>[n("td",De,[t(T,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(A,{"text-color":"blue-10",class:"col q-pa-none",onClick:G=>ie(a.row._id)},{default:i(()=>[Ue]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(w).modalIsOpen?(V(),M(qe,{key:0,class:"modal"},{default:i(()=>[n("div",Re,[n("h6",Pe,we(x.value),1),n("div",Fe,[n("div",Te,[t(N,{label:"Nombre",required:!0,type:"text",ruless:Z,value:r(O),modelValue:r(d),"onUpdate:modelValue":o[5]||(o[5]=a=>q(d)?d.value=a:d=a),onOnWrite:$},null,8,["value","modelValue"]),t(N,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:r(C),modelValue:r(p),"onUpdate:modelValue":o[6]||(o[6]=a=>q(p)?p.value=a:p=a),onOnWrite:ee},null,8,["value","modelValue"]),t(N,{class:"q-pb-xs",label:"Observación",type:"text",required:!1,value:r(z),modelValue:r(f),"onUpdate:modelValue":o[7]||(o[7]=a=>q(f)?f.value=a:f=a),onOnWrite:ae},null,8,["value","modelValue"]),We,n("div",je,[I.value?(V(),M(J,{key:0,disable:r(U),onOnClick:se},null,8,["disable"])):(V(),M(J,{key:1,disable:r(U),onOnClick:ne},null,8,["disable"]))]),m.value?(V(),Q("div",Ge,[t(ve,{color:"primary",size:"2.5em"})])):H("",!0)])])])]),_:1})):H("",!0)],64)}}},Je=pe(Le,[["__scopeId","data-v-296425cd"]]);export{Je as default};
