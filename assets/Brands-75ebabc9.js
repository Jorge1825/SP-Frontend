import{s as k,_ as le,f as l,h as re,l as ie,m as ce,r as v,o as I,c as de,a as d,d as a,w as r,i,g as O,j as ue,F as pe,q as h,t as ve,v as E,p as me,e as fe,x as H}from"./index-2558a67d.js";import{g as x,m as _e,M as ge,B as ye,a as J}from"./ModalForm-db2ed3e8.js";const be=async()=>{try{const n=x(),{data:o}=await k.get("/inventory/brands",{headers:{token:n}});return o}catch(n){console.error(n)}},he=async n=>{try{const o=x(),{data:u}=await k.post("/inventory/brands/register",{name:n.name,farm:n.farm,description:n.description},{headers:{token:o}});return u}catch(o){console.error(o)}},qe=async n=>{try{const o=x(),{data:u}=await k.put(`/inventory/brands/update/${n.id}`,{name:n.name,farm:n.farm,description:n.description},{headers:{token:o}});return u}catch(o){console.error(o)}},we=async n=>{try{const o=x(),{data:u}=await k.put(`/inventory/brands/inactive/${n}`,{},{headers:{token:o}});return u}catch(o){console.error(o)}},ke=async n=>{try{const o=x(),{data:u}=await k.put(`/inventory/brands/active/${n}`,{},{headers:{token:o}});return u}catch(o){console.error(o)}};const D=n=>(me("data-v-b1fb8073"),n=n(),fe(),n),xe={class:"q-py-sm table-container"},Be=D(()=>d("h6",{class:"title q-my-lg"},"Marcas",-1)),Ve={class:"container-content"},Ie={class:"container-table q-mt-md q-pa-md",rounded:""},Se={class:"accions-td"},Ae={class:"accions-td"},Me=D(()=>d("i",{class:"icon icon-check"},null,-1)),Ce={class:"q-my-md text-center"},ze={class:"row q-px-xl"},Oe={class:"col-12"},Ee=D(()=>d("span",{class:"text-required q-pb-sm"},[H("Todos los campos con "),d("span",{class:"text-red"},"*"),H(" son obligatorios")],-1)),De={class:"row justify-center"},Ne={__name:"Brands",setup(n){const o=_e(),u=l(""),B=l(!1),S=l(!0),b=l([]),q=l([]),N=l(),R=re(()=>p.value==""),F=[t=>!!t||"Este campo es requerido"];let m=l(""),p=l(""),f=l(""),_=l(""),A=l(""),M=l(""),C=l(""),y=l("active");const g=ie(),U=l([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"farm",label:"Finca",field:"farm",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),K=t=>{p.value=t},L=t=>{f.value=t},P=t=>{_.value=t},X=()=>{u.value="REGISTRAR MARCAS",A.value="",M.value="",C.value="",S.value=!0,o.toggleModal(),p.value="",f.value="",_.value=""},Y=t=>{u.value="EDITAR MARCAS",S.value=!1,N.value=t._id,A.value=t.name,M.value=t.farm,C.value=t.description,p.value=t.name,f.value=t.farm,_.value=t.description,o.toggleModal()};async function Z(t){try{const s=await we(t);g.notify({type:"positive",message:"Marca desactivada correctamente",position:"top"}),b.value=[],q.value=[],w()}catch{g.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function ee(){o.toggleModal();try{const t=await he({name:p.value,farm:f.value,description:_.value});g.notify({type:"positive",message:"Marca registrada correctamente",position:"top"}),b.value=[],w()}catch{g.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}const w=async()=>{b.value=[],q.value=[],B.value=!0;try{const{Brands:t}=await be();let s=1,V=1;t.forEach(c=>{c.status=c.status?"Inactivo":"Activo",c.status=="Activo"?(c.id=s++,b.value.push(c)):(c.id=V++,q.value.push(c)),c.description=c.description.trim()==""?"No registra":c.description}),B.value=!1}catch{g.notify({type:"negative",message:"Ocurrió un error",position:"top"})}};async function te(){try{const t=await qe({id:N.value,name:p.value,farm:f.value,description:_.value});g.notify({type:"positive",position:"top",message:"Marca actualizada correctamente"}),o.toggleModal(),b.value=[],w()}catch{g.notify({type:"negative",position:"top",message:"Ocurrió un error"})}p.value="",_.value="",f.value=""}async function ae(t){try{const s=await ke(t);g.notify({type:"positive",message:"Marca activada correctamente",position:"top"}),b.value=[],q.value=[],w()}catch{g.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}return ce(()=>{w()}),(t,s)=>{const V=v("q-separator"),c=v("q-tab"),oe=v("q-tabs"),T=v("q-icon"),j=v("q-input"),z=v("q-btn"),W=v("q-btn-group"),G=v("q-table"),Q=v("q-tab-panel"),ne=v("q-tab-panels"),se=v("q-card");return I(),de(pe,null,[d("div",xe,[Be,a(V,{class:"separator"}),d("div",Ve,[a(ye,{onOnClick:X,label:"Crear nueva marca"}),d("div",Ie,[a(se,null,{default:r(()=>[a(oe,{modelValue:i(y),"onUpdate:modelValue":s[0]||(s[0]=e=>h(y)?y.value=e:y=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[a(c,{name:"active",label:"Activos"}),a(c,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),a(V),a(ne,{modelValue:i(y),"onUpdate:modelValue":s[3]||(s[3]=e=>h(y)?y.value=e:y=e),animated:""},{default:r(()=>[a(Q,{name:"active"},{default:r(()=>[a(G,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:b.value,columns:U.value,filter:i(m),loading:B.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(j,{borderless:"",dense:"",debounce:"300",modelValue:i(m),"onUpdate:modelValue":s[1]||(s[1]=e=>h(m)?m.value=e:m=e),placeholder:"Search"},{append:r(()=>[a(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(e=>[d("td",Se,[a(W,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(z,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:$=>Y(e.row)},null,8,["onClick"]),a(z,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:$=>Z(e.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),a(Q,{name:"inactive"},{default:r(()=>[a(G,{flat:"",bordered:"",title:"Marcas","row-key":"name",rows:q.value,columns:U.value,filter:i(m),loading:B.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(j,{borderless:"",dense:"",debounce:"300",modelValue:i(m),"onUpdate:modelValue":s[2]||(s[2]=e=>h(m)?m.value=e:m=e),placeholder:"Search"},{append:r(()=>[a(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(e=>[d("td",Ae,[a(W,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(z,{"text-color":"blue-10",class:"col q-pa-none",onClick:$=>ae(e.row._id)},{default:r(()=>[Me]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),i(o).modalIsOpen?(I(),O(ge,{key:0},{default:r(()=>[d("h6",Ce,ve(u.value),1),d("div",ze,[d("div",Oe,[a(E,{label:"Nombre",required:!0,type:"text",ruless:F,value:i(A),modelValue:i(p),"onUpdate:modelValue":s[4]||(s[4]=e=>h(p)?p.value=e:p=e),onOnWrite:K},null,8,["value","modelValue"]),a(E,{class:"q-pb-xs",label:"Finca",required:!0,type:"text",ruless:F,value:i(M),modelValue:i(f),"onUpdate:modelValue":s[5]||(s[5]=e=>h(f)?f.value=e:f=e),onOnWrite:L},null,8,["value","modelValue"]),a(E,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:i(C),modelValue:i(_),"onUpdate:modelValue":s[6]||(s[6]=e=>h(_)?_.value=e:_=e),onOnWrite:P},null,8,["value","modelValue"]),Ee,d("div",De,[S.value?(I(),O(J,{key:0,disable:i(R),onOnClick:ee},null,8,["disable"])):(I(),O(J,{key:1,disable:i(R),onOnClick:te},null,8,["disable"]))])])])]),_:1})):ue("",!0)],64)}}},Ue=le(Ne,[["__scopeId","data-v-b1fb8073"]]);export{Ue as default};
