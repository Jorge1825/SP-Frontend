import{g as V,B as pe}from"./ButtonAdd-ed09f57b.js";import{s as A,_ as ve,l as fe,m as me,g as c,q as _e,f as W,v as ye,x as ge,r as p,o as T,c as L,a as r,d as e,w as l,h as d,i as z,M as be,j as Q,F as he,y as P,t as qe,z as H,B as J,p as we,e as ke,A as K}from"./index-a2b1bd69.js";const xe=async s=>{try{const i=V(),{data:a}=await A.get("/maintenance/pays",{headers:{token:i,farm:s}});return a}catch(i){return i}},Te=async(s,i)=>{try{const a=V(),{data:v}=await A.post("/maintenance/pays/register",{name:s.name,description:s.description},{headers:{token:a,farm:i}});return v}catch(a){return a}},Pe=async(s,i)=>{try{const a=V(),{data:v}=await A.put(`/maintenance/pays/update/${s.id}`,{name:s.name,description:s.description},{headers:{token:a,farm:i}});return v}catch(a){return a}},Ve=async(s,i)=>{try{const a=V(),{data:v}=await A.put(`/maintenance/pays/inactive/${s}`,{},{headers:{token:a,farm:i}});return v}catch(a){return a}},Ae=async(s,i)=>{try{const a=V(),{data:v}=await A.put(`/maintenance/pays/active/${s}`,{},{headers:{token:a,farm:i}});return v}catch(a){return a}};const D=s=>(we("data-v-cb684248"),s=s(),ke(),s),Ie={class:"q-py-md table-container"},Oe={class:"row"},Se=D(()=>r("h6",{class:"title q-my-lg"},"TIPOS DE PAGO",-1)),Ce={class:"container-content"},Ee={class:"container-table q-mt-md q-pa-md",rounded:""},ze={class:"accions-td"},De={class:"accions-td"},Be=D(()=>r("i",{class:"icon icon-check"},null,-1)),Me={class:"q-my-md text-center"},Ne={class:"row q-px-xl"},Re={class:"col-12"},Fe=D(()=>r("span",{class:"text-required q-py-sm"},[K("Todos los campos con "),r("span",{class:"text-red"},"*"),K(" son obligatorios")],-1)),Ue={class:"row justify-center"},$e={key:0,class:"spinner"},Ge={__name:"TypePays",setup(s){const i=fe(),a=me(),v=c(""),f=c(!1),O=c(!0),h=c([]),x=c([]),B=c(),X=_e(),g=c(!1),M=W(()=>m.value==""?!0:g.value==!0),Y=[t=>!!t||"Este campo es requerido"];let _=c(""),b=c("active"),m=c(""),q=c(""),S=c(""),C=c("");const N=c([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),Z=t=>{m.value=t},ee=t=>{q.value=t},ae=()=>{v.value="REGISTRAR TIPO DE PAGO",te(),O.value=!0,a.toggleModal()},te=()=>{C.value="",S.value="",m.value="",q.value=""},oe=t=>{v.value="EDITAR TIPO DE PAGO",O.value=!1,B.value=t._id,C.value=t.description,S.value=t.name,m.value=t.name,q.value=t.description,a.toggleModal()},y=(t,o)=>{i.notify({type:t,message:o,position:"top"})};async function w(){h.value=[],x.value=[],f.value=!0;try{const{pays:t}=await xe(k.value);let o=1,I=1;t.forEach(u=>{u.status=u.status?"Inactivo":"Activo",u.status=="Activo"?(u.id=o++,h.value.push(u)):(u.id=I++,x.value.push(u)),u.description=u.description.trim()==""?"No registra":u.description}),f.value=!1}catch{f.value=!1,y("negative","Ocurrió un error")}}async function ne(){g.value=!0;try{const t=await Te({name:m.value,description:q.value},k.value);g.value=!1,y("positive","Tipo de pago registrado correctamente"),a.toggleModal(),h.value=[],w()}catch{g.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}}async function se(){g.value=!0;try{const t=await Pe({id:B.value,name:m.value,description:q.value},k.value);g.value=!1,y("positive","Tipo de pago actualizado correctamente"),a.toggleModal(),h.value=[],w()}catch{g.value=!1,y("negative","Ocurrió un error, por favor verifique los datos")}m.value="",q.value=""}async function le(t){f.value=!0;try{const o=await Ae(t,k.value);y("positive","Tipo de pago activado correctamente"),f.value=!1,h.value=[],x.value=[],w()}catch{f.value=!1,y("negative","Ocurrió un error")}}async function re(t){f.value=!1;try{const o=await Ve(t,k.value);f.value=!1,y("positive","Tipo de pago desactivado correctamente"),h.value=[],x.value=[],w()}catch{f.value=!1,y("negative","Ocurrió un error")}}const k=W(()=>X.idSelected);return ye(k,()=>{w()}),ge(()=>{w()}),(t,o)=>{const I=p("q-separator"),u=p("q-tab"),ce=p("q-tabs"),R=p("q-icon"),F=p("q-input"),E=p("q-btn"),U=p("q-btn-group"),$=p("q-table"),G=p("q-tab-panel"),ie=p("q-tab-panels"),ue=p("q-card"),de=p("q-spinner-ios");return T(),L(he,null,[r("div",Ie,[r("div",Oe,[r("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=n=>t.$router.back())}),Se]),e(I,{class:"separator"}),r("div",Ce,[e(pe,{onOnClick:ae,label:"Crear tipo de pago"}),r("div",Ee,[e(ue,null,{default:l(()=>[e(ce,{modelValue:d(b),"onUpdate:modelValue":o[1]||(o[1]=n=>P(b)?b.value=n:b=n),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(u,{name:"active",label:"Activos"}),e(u,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),e(I),e(ie,{modelValue:d(b),"onUpdate:modelValue":o[4]||(o[4]=n=>P(b)?b.value=n:b=n),animated:""},{default:l(()=>[e(G,{name:"active"},{default:l(()=>[e($,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:h.value,columns:N.value,filter:d(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(F,{borderless:"",dense:"",debounce:"300",modelValue:d(_),"onUpdate:modelValue":o[2]||(o[2]=n=>P(_)?_.value=n:_=n),placeholder:"Buscar"},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(n=>[r("td",ze,[e(U,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(E,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:j=>oe(n.row)},null,8,["onClick"]),e(E,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:j=>re(n.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),e(G,{name:"inactive"},{default:l(()=>[e($,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:x.value,columns:N.value,filter:d(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[e(F,{borderless:"",dense:"",debounce:"300",modelValue:d(_),"onUpdate:modelValue":o[3]||(o[3]=n=>P(_)?_.value=n:_=n),placeholder:"Buscar"},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(n=>[r("td",De,[e(U,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[e(E,{"text-color":"blue-10",class:"col q-pa-none",onClick:j=>le(n.row._id)},{default:l(()=>[Be]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),d(a).modalIsOpen?(T(),z(be,{key:0},{default:l(()=>[r("h6",Me,qe(v.value),1),r("div",Ne,[r("div",Re,[e(H,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:Y,value:d(S),modelValue:d(m),"onUpdate:modelValue":o[5]||(o[5]=n=>P(m)?m.value=n:m=n),onOnWrite:Z},null,8,["value","modelValue"]),e(H,{label:"Descripción",type:"text",required:!1,value:d(C),"v-model":d(q),onOnWrite:ee},null,8,["value","v-model"]),Fe,r("div",Ue,[O.value?(T(),z(J,{key:0,disable:d(M),onOnClick:ne},null,8,["disable"])):(T(),z(J,{key:1,disable:d(M),onOnClick:se},null,8,["disable"]))]),g.value?(T(),L("div",$e,[e(de,{color:"primary",size:"2.5em"})])):Q("",!0)])])]),_:1})):Q("",!0)],64)}}},Le=ve(Ge,[["__scopeId","data-v-cb684248"]]);export{Le as default};
