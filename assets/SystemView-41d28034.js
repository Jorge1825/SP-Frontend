import{g as w,B as R}from"./ButtonAdd-59c43077.js";import{s as q,_ as M,x as $,f as u,l as j,r as i,o as L,c as Q,d as e,a as p,w as n,i as m,m as g,v as F,p as G,e as H}from"./index-85c6c6a3.js";const J=async()=>{try{const s=w(),{data:o}=await q.get("/users",{headers:{token:s}});return o}catch(s){console.error(s)}},K=async s=>{try{const o=w(),{data:a}=await q.put(`/users/inactive/${s}`,{},{headers:{token:o}});return a}catch(o){console.error(o)}},P=async s=>{console.log(s);try{const o=w(),{data:a}=await q.put(`/users/active/${s}`,{},{headers:{token:o}});return a}catch(o){console.error(o)}};const C=s=>(G("data-v-6780aab7"),s=s(),H(),s),W={class:"q-py-md table-container"},X=C(()=>p("h6",{class:"title q-my-lg"},"ACCESO AL SISTEMA",-1)),Y={class:"container-content"},Z={class:"container-table q-mt-md q-pa-md",rounded:""},ee={style:{padding:"0px",margin:"0px","min-width":"100px","max-width":"20px"}},te={style:{padding:"0px",margin:"0px","min-width":"100px","max-width":"100px"}},oe=C(()=>p("i",{class:"icon icon-check"},null,-1)),ae={__name:"SystemView",setup(s){const o=$();let a=u("");const f=u([]),_=u([]),v=u(!1);let d=u("active");const x=u([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Nombre",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Tipo",label:"Tipo",field:"tpdocument",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Documento",label:"Documento",field:"numdocument",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"role",label:"Rol",field:"role",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),E=r=>{console.log(r)},h=async()=>{v.value=!0;const r=await J();let l=1,b=1;r.forEach(c=>{c.status=c.status?"Inactivo":"Activo",c.status=="Activo"?(c.id=l++,f.value.push(c)):(c.id=b++,_.value.push(c))}),v.value=!1};function I(r){console.log(r)}function B(r){try{K(r),o.notify({type:"positive",message:"Usuario inactivado correctamente",position:"top"}),f.value=[],_.value=[],h()}catch{o.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}function N(r){try{P(r),o.notify({type:"positive",message:"Usuario activado correctamente",position:"top"}),f.value=[],_.value=[],h()}catch{o.notify({type:"negative",message:"Ocurrió un error"})}}return j(()=>{h()}),(r,l)=>{const b=i("q-separator"),c=i("q-tab"),T=i("q-tabs"),S=i("q-icon"),k=i("q-input"),y=i("q-btn"),V=i("q-btn-group"),U=i("q-table"),z=i("q-tab-panel"),O=i("q-tab-panels"),D=i("q-card");return L(),Q("div",W,[X,e(b,{class:"separator"}),p("div",Y,[e(R,{onOnClick:E,label:"Crear nuevo usuario"}),p("div",Z,[e(D,null,{default:n(()=>[e(T,{modelValue:m(d),"onUpdate:modelValue":l[0]||(l[0]=t=>g(d)?d.value=t:d=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:n(()=>[e(c,{name:"active",label:"Activos"}),e(c,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),e(b),e(O,{modelValue:m(d),"onUpdate:modelValue":l[3]||(l[3]=t=>g(d)?d.value=t:d=t),animated:""},{default:n(()=>[e(z,{name:"active"},{default:n(()=>[e(U,{flat:"",bordered:"",title:"Usuarios","row-key":"name",rows:f.value,columns:x.value,filter:m(a),loading:v.value,"rows-per-page-options":[5,10,20]},{"top-right":n(()=>[e(k,{borderless:"",dense:"",debounce:"300",modelValue:m(a),"onUpdate:modelValue":l[1]||(l[1]=t=>g(a)?a.value=t:a=t),placeholder:"Search"},{append:n(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":n(t=>[p("td",ee,[e(V,{class:"full-width full-height",outline:"",square:""},{default:n(()=>[e(y,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:A=>I(t.row._id)},null,8,["onClick"]),e(y,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:A=>B(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),e(z,{name:"inactive"},{default:n(()=>[e(U,{flat:"",bordered:"",title:"Usuarios","row-key":"name",rows:_.value,columns:x.value,filter:m(a),loading:v.value,"rows-per-page-options":[5,10,20]},{"top-right":n(()=>[e(k,{borderless:"",dense:"",debounce:"300",modelValue:m(a),"onUpdate:modelValue":l[2]||(l[2]=t=>g(a)?a.value=t:a=t),placeholder:"Search"},{append:n(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"]),F("´ ")]),"body-cell-Acciones":n(t=>[p("td",te,[e(V,{class:"full-width full-height",outline:"",square:""},{default:n(()=>[e(y,{"text-color":"blue-10",class:"col q-pa-none",onClick:A=>N(t.row._id)},{default:n(()=>[oe]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])}}},le=M(ae,[["__scopeId","data-v-6780aab7"]]);export{le as default};
