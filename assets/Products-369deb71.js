import{s as k,_ as ue,f as s,h as ie,l as de,m as ve,r as v,o as S,c as pe,a as u,d as o,w as c,i as r,g as N,j as me,F as fe,q as h,t as ge,v as O,p as _e,e as be,x as K}from"./index-2558a67d.js";import{g as V,m as ye,M as he,B as qe,a as L}from"./ModalForm-db2ed3e8.js";const we=async()=>{try{const a=V(),{data:n}=await k.get("/inventory/products",{headers:{token:a}});return n}catch(a){console.error(a)}},xe=async a=>{try{const n=V(),{data:i}=await k.post("/inventory/products/register",{name:a.name,categories:a.categories,brand:a.brand,amount:a.amount},{headers:{token:n}});return i}catch(n){console.error(n)}},ke=async a=>{try{const n=V(),{data:i}=await k.put(`/inventory/products/update/${a.id}`,{name:a.name,categories:a.categories,brand:a.brand,amount:a.amount},{headers:{token:n}});return i}catch(n){console.error(n)}},Ve=async a=>{try{const n=V(),{data:i}=await k.put(`/inventory/products/inactive/${a}`,{},{headers:{token:n}});return i}catch(n){console.error(n)}},Pe=async a=>{try{const n=V(),{data:i}=await k.put(`/inventory/products/active/${a}`,{},{headers:{token:n}});return i}catch(n){console.error(n)}};const R=a=>(_e("data-v-16143396"),a=a(),be(),a),Ce={class:"q-py-sm table-container"},Ie=R(()=>u("h6",{class:"title q-my-lg"},"Productos",-1)),Se={class:"container-content"},Oe={class:"container-table q-mt-md q-pa-md",rounded:""},ze={class:"accions-td"},Ae={class:"accions-td"},Be=R(()=>u("i",{class:"icon icon-check"},null,-1)),Ee={class:"q-my-md text-center"},Me={class:"row q-px-xl"},Ue={class:"col-12"},Ne=R(()=>u("span",{class:"text-required q-pb-sm"},[K("Todos los campos con "),u("span",{class:"text-red"},"*"),K(" son obligatorios")],-1)),Re={class:"row justify-center"},De={__name:"Products",setup(a){const n=ye(),i=s(""),P=s(!1),z=s(!0),q=s([]),w=s([]),D=s(),T=ie(()=>d.value==""),C=[e=>!!e||"Este campo es requerido"];let p=s(""),d=s(""),m=s(""),f=s(""),g=s(""),A=s(""),B=s(""),E=s(""),M=s(""),y=s("active");const b=de(),W=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"categories",label:"Categoria",field:"categories",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"brands",label:"Marca",field:"brands",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"amount",label:"Cantidad",field:"amount",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),X=e=>{d.value=e},Y=e=>{m.value=e},Z=e=>{f.value=e},$=e=>{g.value=e},ee=()=>{i.value="REGISTRAR PRODUCTOS",A.value="",B.value="",E.value="",M.value="",z.value=!0,n.toggleModal(),d.value="",m.value="",f.value="",g.value=""},te=e=>{i.value="EDITAR PRODUCTOS",z.value=!1,D.value=e._id,A.value=e.name,B.value=e.categories,E.value=e.brand,M.value=e.amount,d.value=e.name,m.value=e.categories,f.value=e.brand,g.value=e.amount,n.toggleModal()};async function oe(e){try{const l=await Ve(e);b.notify({type:"positive",message:"Producto desactivado correctamente",position:"top"}),q.value=[],w.value=[],x()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function ae(){n.toggleModal();try{const e=await xe({name:d.value,categories:m.value,brand:f.value,amount:g.value});b.notify({type:"positive",message:"Producto registrado correctamente",position:"top"}),q.value=[],x()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}const x=async()=>{q.value=[],w.value=[],P.value=!0;try{const{products:e}=await we();let l=1,I=1;e.forEach(_=>{_.status=_.status?"Inactivo":"Activo",_.status=="Activo"?(_.id=l++,q.value.push(_)):(_.id=I++,w.value.push(_))}),P.value=!1}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}};async function ne(){try{const e=await ke({id:D.value,name:d.value,categories:m.value,brand:f.value,amount:g.value});b.notify({type:"positive",position:"top",message:"Producto actualizado correctamente"}),n.toggleModal(),q.value=[],x()}catch{b.notify({type:"negative",position:"top",message:"Ocurrió un error"})}d.value="",f.value="",m.value="",g.value=""}async function le(e){try{const l=await Pe(e);b.notify({type:"positive",message:"Producto activado correctamente",position:"top"}),q.value=[],w.value=[],x()}catch{b.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}return ve(()=>{x()}),(e,l)=>{const I=v("q-separator"),_=v("q-tab"),se=v("q-tabs"),j=v("q-icon"),F=v("q-input"),U=v("q-btn"),G=v("q-btn-group"),Q=v("q-table"),H=v("q-tab-panel"),re=v("q-tab-panels"),ce=v("q-card");return S(),pe(fe,null,[u("div",Ce,[Ie,o(I,{class:"separator"}),u("div",Se,[o(qe,{onOnClick:ee,label:"Crear nuevo producto"}),u("div",Oe,[o(ce,null,{default:c(()=>[o(se,{modelValue:r(y),"onUpdate:modelValue":l[0]||(l[0]=t=>h(y)?y.value=t:y=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:c(()=>[o(_,{name:"active",label:"Activos"}),o(_,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),o(I),o(re,{modelValue:r(y),"onUpdate:modelValue":l[3]||(l[3]=t=>h(y)?y.value=t:y=t),animated:""},{default:c(()=>[o(H,{name:"active"},{default:c(()=>[o(Q,{flat:"",bordered:"",title:"Bodegas","row-key":"name",rows:q.value,columns:W.value,filter:r(p),loading:P.value,"rows-per-page-options":[5,10,20]},{"top-right":c(()=>[o(F,{borderless:"",dense:"",debounce:"300",modelValue:r(p),"onUpdate:modelValue":l[1]||(l[1]=t=>h(p)?p.value=t:p=t),placeholder:"Search"},{append:c(()=>[o(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":c(t=>[u("td",ze,[o(G,{class:"full-width full-height",outline:"",square:""},{default:c(()=>[o(U,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:J=>te(t.row)},null,8,["onClick"]),o(U,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:J=>oe(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),o(H,{name:"inactive"},{default:c(()=>[o(Q,{flat:"",bordered:"",title:"Bodegas","row-key":"name",rows:w.value,columns:W.value,filter:r(p),loading:P.value,"rows-per-page-options":[5,10,20]},{"top-right":c(()=>[o(F,{borderless:"",dense:"",debounce:"300",modelValue:r(p),"onUpdate:modelValue":l[2]||(l[2]=t=>h(p)?p.value=t:p=t),placeholder:"Search"},{append:c(()=>[o(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":c(t=>[u("td",Ae,[o(G,{class:"full-width full-height",outline:"",square:""},{default:c(()=>[o(U,{"text-color":"blue-10",class:"col q-pa-none",onClick:J=>le(t.row._id)},{default:c(()=>[Be]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),r(n).modalIsOpen?(S(),N(he,{key:0},{default:c(()=>[u("h6",Ee,ge(i.value),1),u("div",Me,[u("div",Ue,[o(O,{label:"Nombre",required:!0,type:"text",ruless:C,value:r(A),modelValue:r(d),"onUpdate:modelValue":l[4]||(l[4]=t=>h(d)?d.value=t:d=t),onOnWrite:X},null,8,["value","modelValue"]),o(O,{class:"q-pb-xs",label:"Categoria",required:!0,type:"text",ruless:C,value:r(B),modelValue:r(m),"onUpdate:modelValue":l[5]||(l[5]=t=>h(m)?m.value=t:m=t),onOnWrite:Y},null,8,["value","modelValue"]),o(O,{class:"q-pb-xs",label:"Marca",required:!0,type:"text",ruless:C,value:r(E),modelValue:r(f),"onUpdate:modelValue":l[6]||(l[6]=t=>h(f)?f.value=t:f=t),onOnWrite:Z},null,8,["value","modelValue"]),o(O,{class:"q-pb-xs",label:"Cantidad",required:!0,type:"text",ruless:C,value:r(M),modelValue:r(g),"onUpdate:modelValue":l[7]||(l[7]=t=>h(g)?g.value=t:g=t),onOnWrite:$},null,8,["value","modelValue"]),Ne,u("div",Re,[z.value?(S(),N(L,{key:0,disable:r(T),onOnClick:ae},null,8,["disable"])):(S(),N(L,{key:1,disable:r(T),onOnClick:ne},null,8,["disable"]))])])])]),_:1})):me("",!0)],64)}}},je=ue(De,[["__scopeId","data-v-16143396"]]);export{je as default};
