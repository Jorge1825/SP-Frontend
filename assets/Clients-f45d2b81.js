import{_ as be,m as ge,q as he,g as n,v as ye,f as K,x as qe,y as Ce,r as i,o as x,c as X,a as u,d as l,w as r,h as s,i as B,M as we,j as Y,F as Ve,a0 as ke,z as y,t as xe,A as N,B as Z,p as Se,e as Ie,C as $,a1 as Ne,R as ee,a2 as Ee,a3 as Oe,a4 as ze}from"./index-24e57f89.js";import{B as Ae}from"./ButtonAdd-6b219864.js";const R=S=>(Se("data-v-b7c77c8b"),S=S(),Ie(),S),De={class:"q-py-sm table-container"},Me={class:"row"},Te=R(()=>u("h6",{class:"title q-my-lg"},"Clientes",-1)),Ue={class:"container-content"},Be={class:"container-table q-mt-md q-pa-md",rounded:""},Re={class:"accions-td"},Fe={class:"accions-td"},Le=R(()=>u("i",{class:"icon icon-check"},null,-1)),We={class:"modal-eps"},je={class:"q-my-md text-center"},Ge={class:"row q-px-xl"},Pe={class:"col-12"},He=R(()=>u("span",{class:"text-required q-pb-sm"},[$("Todos los campos con "),u("span",{class:"text-red"},"*"),$(" son obligatorios")],-1)),Qe={class:"row justify-center"},Je={key:0,class:"spinner"},Ke={__name:"Clients",setup(S){const ae=ge(),V=he(),E=n(""),c=n(!1),O=n(!0),q=n([]),k=n([]),F=n(),te=ye(),g=n(!1),L=K(()=>d.value==""||v.value==""||p.value==""||m.value==""?!0:g.value==!0),I=[e=>!!e||"Este campo es requerido"];let _=n(""),h=n("active"),d=n(""),v=n(""),p=n(""),m=n(""),z=n(""),A=n(""),D=n(""),M=n("");const W=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"document",label:"N° Documento",field:"document",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"phone",label:"Teléfono",field:"phone",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"address",label:"Dirección",field:"address",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),le=e=>{d.value=e},oe=e=>{v.value=e},ne=e=>{p.value=e},se=e=>{m.value=e},ue=()=>{E.value="REGISTRAR CLIENTE",re(),O.value=!0,V.toggleModal()},re=()=>{z.value="",A.value="",D.value="",M.value="",d.value="",v.value="",p.value="",m.value=""},ie=e=>{E.value="EDITAR CLIENTE",O.value=!1,F.value=e._id,z.value=e.name,A.value=e.phone,D.value=e.document,M.value=e.address,d.value=e.name,v.value=e.phone,p.value=e.document,m.value=e.address,V.toggleModal()},f=(e,a)=>{ae.notify({type:e,message:a,position:"top"})},C=async()=>{q.value=[],k.value=[],c.value=!0;try{const{client:e}=await ke(w.value);let a=1,b=1;e.forEach(o=>{o.status=o.status?"Inactivo":"Activo",o.status=="Activo"?(o.id=a++,q.value.push(o)):(o.id=b++,k.value.push(o))}),c.value=!1}catch{c.value=!1,f("negative","Ocurrió un error")}};async function ce(){var e,a,b;g.value=!0;try{const o=await Ne({name:d.value,phone:v.value,document:p.value,address:m.value},w.value);g.value=!1,((b=(a=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:a.errors[0])==null?void 0:b.msg)==ee.LENGHTDOCUMENT?f("negative","El documento es muy corto"):(f("positive","Cliente registrado correctamente"),V.toggleModal(),q.value=[],C())}catch{g.value=!1,f("negative","Ocurrió un error, por favor verifique los datos")}}async function de(){var e,a,b;g.value=!0;try{const o=await Ee({id:F.value,name:d.value,phone:v.value,document:p.value,address:m.value},w.value);g.value=!1,((b=(a=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:a.errors[0])==null?void 0:b.msg)==ee.LENGHTDOCUMENT?f("negative","El documento es muy corto"):(f("positive","Cliente actualizado correctamente"),V.toggleModal(),q.value=[],C())}catch{g.value=!1,f("negative","Ocurrió un error, por favor verifique los datos")}d.value="",v.value="",p.value="",m.value=""}async function ve(e){c.value=!0;try{await Oe(e,w.value),f("positive","Cliente activado correctamente"),c.value=!1,q.value=[],k.value=[],C()}catch{c.value=!1,f("negative","Ocurrió un error")}}async function pe(e){c.value=!1;try{await ze(e,w.value),c.value=!1,f("positive","Cliente desactivado correctamente"),q.value=[],k.value=[],C()}catch{c.value=!1,f("negative","Ocurrió un error")}}const w=K(()=>te.idSelected);return qe(w,()=>{C()}),Ce(()=>{C()}),(e,a)=>{const b=i("q-separator"),o=i("q-tab"),T=i("q-tabs"),j=i("q-icon"),G=i("q-input"),U=i("q-btn"),P=i("q-btn-group"),H=i("q-table"),Q=i("q-tab-panel"),me=i("q-tab-panels"),fe=i("q-card"),_e=i("q-spinner-ios");return x(),X(Ve,null,[u("div",De,[u("div",Me,[u("i",{class:"icon icon-backRoute q-pt-lg",onClick:a[0]||(a[0]=t=>e.$router.back())}),Te]),l(b,{class:"separator"}),u("div",Ue,[l(Ae,{onOnClick:ue,label:"Crear nuevo cliente"}),u("div",Be,[l(fe,null,{default:r(()=>[l(T,{modelValue:s(h),"onUpdate:modelValue":a[1]||(a[1]=t=>y(h)?h.value=t:h=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[l(o,{name:"active",label:"Activos"}),l(o,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),l(b),l(me,{modelValue:s(h),"onUpdate:modelValue":a[4]||(a[4]=t=>y(h)?h.value=t:h=t),animated:""},{default:r(()=>[l(Q,{name:"active"},{default:r(()=>[l(H,{flat:"",bordered:"",title:"Clientes","row-key":"name",rows:q.value,columns:W.value,filter:s(_),loading:c.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[l(G,{borderless:"",dense:"",debounce:"300",modelValue:s(_),"onUpdate:modelValue":a[2]||(a[2]=t=>y(_)?_.value=t:_=t),placeholder:"Search"},{append:r(()=>[l(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(t=>[u("td",Re,[l(P,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[l(U,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>ie(t.row)},null,8,["onClick"]),l(U,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:J=>pe(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),l(Q,{name:"inactive"},{default:r(()=>[l(H,{flat:"",bordered:"",title:"Clientes","row-key":"name",rows:k.value,columns:W.value,filter:s(_),loading:c.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[l(G,{borderless:"",dense:"",debounce:"300",modelValue:s(_),"onUpdate:modelValue":a[3]||(a[3]=t=>y(_)?_.value=t:_=t),placeholder:"Search"},{append:r(()=>[l(j,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(t=>[u("td",Fe,[l(P,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[l(U,{"text-color":"blue-10",class:"col q-pa-none",onClick:J=>ve(t.row._id)},{default:r(()=>[Le]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),s(V).modalIsOpen?(x(),B(we,{key:0,class:"modal"},{default:r(()=>[u("div",We,[u("h6",je,xe(E.value),1),u("div",Ge,[u("div",Pe,[l(N,{label:"Nombre",required:!0,type:"text",ruless:I,value:s(z),modelValue:s(d),"onUpdate:modelValue":a[5]||(a[5]=t=>y(d)?d.value=t:d=t),onOnWrite:le},null,8,["value","modelValue"]),l(N,{class:"q-mb-md",required:!0,label:"Teléfono",type:"text",ruless:I,value:s(A),modelValue:s(v),"onUpdate:modelValue":a[6]||(a[6]=t=>y(v)?v.value=t:v=t),onOnWrite:oe},null,8,["value","modelValue"]),l(N,{class:"q-pb-xs",label:"N° Documento",required:!0,type:"text",ruless:I,value:s(D),modelValue:s(p),"onUpdate:modelValue":a[7]||(a[7]=t=>y(p)?p.value=t:p=t),onOnWrite:ne},null,8,["value","modelValue"]),l(N,{class:"q-pb-xs",label:"Dirección",required:!0,type:"text",ruless:I,value:s(M),modelValue:s(m),"onUpdate:modelValue":a[8]||(a[8]=t=>y(m)?m.value=t:m=t),onOnWrite:se},null,8,["value","modelValue"]),He,u("div",Qe,[O.value?(x(),B(Z,{key:0,disable:s(L),onOnClick:ce},null,8,["disable"])):(x(),B(Z,{key:1,disable:s(L),onOnClick:de},null,8,["disable"]))]),g.value?(x(),X("div",Je,[l(_e,{color:"primary",size:"2.5em"})])):Y("",!0)])])])]),_:1})):Y("",!0)],64)}}},Ze=be(Ke,[["__scopeId","data-v-b7c77c8b"]]);export{Ze as default};
