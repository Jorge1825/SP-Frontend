import{s as A,_ as me,l as ge,m as _e,g as n,q as be,f as H,v as he,x as ye,r as v,o as S,c as J,a as c,d as a,w as r,h as i,i as G,M as qe,j as K,F as we,y as k,t as ke,z as M,B as X,p as Ce,e as xe,A as Y}from"./index-a2b1bd69.js";import{g as I,B as Ve}from"./ButtonAdd-ed09f57b.js";const Se=async l=>{try{const u=I(),{data:s}=await A.get("/costs/costsplanting",{headers:{token:u,farm:l}});return s}catch(u){return u}},Ae=async(l,u)=>{try{const s=I(),{data:p}=await A.post("/costs/costsplanting/register",{name:l.name,description:l.description,value:l.value},{headers:{token:s,farm:u}});return p}catch(s){return s}},Ie=async(l,u)=>{try{const s=I(),{data:p}=await A.put(`/costs/costsplanting/update/${l.id}`,{name:l.name,description:l.description,value:l.value},{headers:{token:s,farm:u}});return p}catch(s){return s}},Ee=async(l,u)=>{try{const s=I(),{data:p}=await A.put(`/costs/costsplanting/inactivate/${l}`,{},{headers:{token:s,farm:u}});return p}catch(s){return s}},ze=async(l,u)=>{try{const s=I(),{data:p}=await A.put(`/costs/costsplanting/activate/${l}`,{},{headers:{token:s,farm:u}});return p}catch(s){return s}};const N=l=>(Ce("data-v-5e7a613c"),l=l(),xe(),l),Oe={class:"q-py-sm table-container"},Pe={class:"row"},Be=N(()=>c("h6",{class:"title q-my-lg"},"Gastos de Siembra",-1)),De={class:"container-content"},Ge={class:"container-table q-mt-md q-pa-md",rounded:""},Me={class:"accions-td"},Ne={class:"accions-td"},Re=N(()=>c("i",{class:"icon icon-check"},null,-1)),Te={class:"q-my-md text-center"},Ue={class:"row q-px-xl"},Fe={class:"col-12"},We=N(()=>c("span",{class:"text-required q-pb-sm"},[Y("Todos los campos con "),c("span",{class:"text-red"},"*"),Y(" son obligatorios")],-1)),je={class:"row justify-center"},Le={key:0,class:"spinner"},$e={__name:"CostsPlanting",setup(l){const u=ge(),s=_e(),p=n(""),f=n(!1),z=n(!0),w=n([]),V=n([]),R=n(),Z=be(),y=n(!1),T=H(()=>m.value==""||g.value==""?!0:y.value==!0),ee=[e=>!!e||"Este campo es requerido"];let _=n(""),q=n("active"),m=n(""),b=n(""),g=n(""),O=n(""),P=n(""),B=n("");const U=n([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"lot",label:"Lote",field:"lot",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"worth",label:"Valor",field:"worth",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),te=e=>{m.value=e},ae=e=>{b.value=e},oe=e=>{g.value=e},se=()=>{p.value="REGISTRAR GASTO DE SIEMBRA",le(),z.value=!0,s.toggleModal()},le=()=>{O.value="",P.value="",B.value="",m.value="",b.value="",g.value=""},ne=e=>{p.value="EDITAR GASTO DE SIEMBRA",z.value=!1,R.value=e._id,O.value=e.name,P.value=e.description,B.value=e.worth,m.value=e.name,b.value=e.description,g.value=e.worth,s.toggleModal()},h=(e,o)=>{u.notify({type:e,message:o,position:"top"})},C=async()=>{w.value=[],V.value=[],f.value=!0;try{const{costs:e}=await Se(x.value);let o=1,E=1;e.forEach(d=>{d.status=d.status?"Inactivo":"Activo",d.status=="Activo"?(d.id=o++,w.value.push(d)):(d.id=E++,V.value.push(d)),d.description=d.description.trim()==""?"No registra":d.description}),f.value=!1}catch{f.value=!1,h("negative","Ocurrió un error")}};async function re(){y.value=!0;try{const e=await Ae({name:m.value,description:b.value,worth:g.value},x.value);y.value=!1,h("positive","Gasto de siembra registrado correctamente"),s.toggleModal(),w.value=[],C()}catch{y.value=!1,h("negative","Ocurrió un error, por favor verifique los datos")}}async function ie(){y.value=!0;try{const e=await Ie({id:R.value,name:m.value,description:b.value,worth:g.value},x.value);y.value=!1,h("positive","Gasto de siembra actualizado correctamente"),s.toggleModal(),w.value=[],C()}catch{y.value=!1,h("negative","Ocurrió un error, por favor verifique los datos")}m.value="",b.value="",g.value=""}async function ce(e){f.value=!0;try{const o=await ze(e,x.value);h("positive","Gasto de siembra activado correctamente"),f.value=!1,w.value=[],V.value=[],C()}catch{f.value=!1,h("negative","Ocurrió un error")}}async function ue(e){f.value=!1;try{const o=await Ee(e,x.value);f.value=!1,h("positive","Gasto de siembra desactivado correctamente"),w.value=[],V.value=[],C()}catch{f.value=!1,h("negative","Ocurrió un error")}}const x=H(()=>Z.idSelected);return he(x,()=>{C()}),ye(()=>{C()}),(e,o)=>{const E=v("q-separator"),d=v("q-tab"),de=v("q-tabs"),F=v("q-icon"),W=v("q-input"),D=v("q-btn"),j=v("q-btn-group"),L=v("q-table"),$=v("q-tab-panel"),ve=v("q-tab-panels"),pe=v("q-card"),fe=v("q-spinner-ios");return S(),J(we,null,[c("div",Oe,[c("div",Pe,[c("i",{class:"icon icon-backRoute q-pt-lg",onClick:o[0]||(o[0]=t=>e.$router.back())}),Be]),a(E,{class:"separator"}),c("div",De,[a(Ve,{onOnClick:se,label:"Crear nuevo gasto de siembra"}),c("div",Ge,[a(pe,null,{default:r(()=>[a(de,{modelValue:i(q),"onUpdate:modelValue":o[1]||(o[1]=t=>k(q)?q.value=t:q=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[a(d,{name:"active",label:"Activos"}),a(d,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),a(E),a(ve,{modelValue:i(q),"onUpdate:modelValue":o[4]||(o[4]=t=>k(q)?q.value=t:q=t),animated:""},{default:r(()=>[a($,{name:"active"},{default:r(()=>[a(L,{flat:"",bordered:"",title:"Gastos de Siembra","row-key":"name",rows:w.value,columns:U.value,filter:i(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(W,{borderless:"",dense:"",debounce:"300",modelValue:i(_),"onUpdate:modelValue":o[2]||(o[2]=t=>k(_)?_.value=t:_=t),placeholder:"Search"},{append:r(()=>[a(F,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(t=>[c("td",Me,[a(j,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(D,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Q=>ne(t.row)},null,8,["onClick"]),a(D,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Q=>ue(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),a($,{name:"inactive"},{default:r(()=>[a(L,{flat:"",bordered:"",title:"Gastos de Actividades","row-key":"name",rows:V.value,columns:U.value,filter:i(_),loading:f.value,"rows-per-page-options":[5,10,20]},{"top-right":r(()=>[a(W,{borderless:"",dense:"",debounce:"300",modelValue:i(_),"onUpdate:modelValue":o[3]||(o[3]=t=>k(_)?_.value=t:_=t),placeholder:"Search"},{append:r(()=>[a(F,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":r(t=>[c("td",Ne,[a(j,{class:"full-width full-height",outline:"",square:""},{default:r(()=>[a(D,{"text-color":"blue-10",class:"col q-pa-none",onClick:Q=>ce(t.row._id)},{default:r(()=>[Re]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),i(s).modalIsOpen?(S(),G(qe,{key:0},{default:r(()=>[c("h6",Te,ke(p.value),1),c("div",Ue,[c("div",Fe,[a(M,{label:"Nombre",required:!0,type:"text",ruless:ee,value:i(O),modelValue:i(m),"onUpdate:modelValue":o[5]||(o[5]=t=>k(m)?m.value=t:m=t),onOnWrite:te},null,8,["value","modelValue"]),a(M,{class:"q-mb-md",label:"Descripción",type:"text",required:!1,value:i(P),modelValue:i(b),"onUpdate:modelValue":o[6]||(o[6]=t=>k(b)?b.value=t:b=t),onOnWrite:ae},null,8,["value","modelValue"]),a(M,{class:"q-pb-xs",label:"Valor",type:"text",required:!1,value:i(B),modelValue:i(g),"onUpdate:modelValue":o[7]||(o[7]=t=>k(g)?g.value=t:g=t),onOnWrite:oe},null,8,["value","modelValue"]),We,c("div",je,[z.value?(S(),G(X,{key:0,disable:i(T),onOnClick:re},null,8,["disable"])):(S(),G(X,{key:1,disable:i(T),onOnClick:ie},null,8,["disable"]))]),y.value?(S(),J("div",Le,[a(fe,{color:"primary",size:"2.5em"})])):K("",!0)])])]),_:1})):K("",!0)],64)}}},Je=me($e,[["__scopeId","data-v-5e7a613c"]]);export{Je as default};
