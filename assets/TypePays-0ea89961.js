import{g as k,B as ie}from"./ButtonAdd-1e3a5e63.js";import{s as x,_ as re,q as ce,m as de,f as d,l as ue,h as G,A as pe,v as ve,r as y,o as V,c as ye,a as r,d as t,w as i,i as u,g as C,M as me,j as fe,F as _e,x as w,t as ge,y as j,B as W,p as be,e as he,z as Q}from"./index-9b0f9ebe.js";const qe=async l=>{try{const a=k(),{data:e}=await x.get("/maintenance/pays",{headers:{token:a,farm:l}});return e}catch(a){console.error(a)}},we=async(l,a)=>{try{const e=k(),{data:p}=await x.post("/maintenance/pays/register",{name:l.name,description:l.description},{headers:{token:e,farm:a}});return p}catch(e){console.error(e)}},ke=async(l,a)=>{try{const e=k(),{data:p}=await x.put(`/maintenance/pays/update/${l.id}`,{name:l.name,description:l.description},{headers:{token:e,farm:a}});return p}catch(e){console.error(e)}},xe=async(l,a)=>{try{const e=k(),{data:p}=await x.put(`/maintenance/pays/inactive/${l}`,{},{headers:{token:e,farm:a}});return p}catch(e){console.error(e)}},Te=async(l,a)=>{try{const e=k(),{data:p}=await x.put(`/maintenance/pays/active/${l}`,{},{headers:{token:e,farm:a}});return p}catch(e){console.error(e)}};const E=l=>(be("data-v-b55c9e0a"),l=l(),he(),l),Pe={class:"q-py-md table-container"},Ve={class:"row"},Ae=E(()=>r("h6",{class:"title q-my-lg"},"TIPOS DE PAGO",-1)),Ie={class:"container-content"},Oe={class:"container-table q-mt-md q-pa-md",rounded:""},Se={class:"accions-td"},Ce={class:"accions-td"},Ee=E(()=>r("i",{class:"icon icon-check"},null,-1)),ze={class:"q-my-md text-center"},De={class:"row q-px-xl"},Be={class:"col-12"},Me=E(()=>r("span",{class:"text-required q-py-sm"},[Q("Todos los campos con "),r("span",{class:"text-red"},"*"),Q(" son obligatorios")],-1)),Ne={class:"row justify-center"},Re={__name:"TypePays",setup(l){const a=ce(),e=de(),p=d(""),T=d(!1),A=d(!0),_=d([]),q=d([]),z=d(),H=ue(),D=G(()=>v.value==""),J=[o=>!!o||"Este campo es requerido"];let m=d(""),f=d("active"),v=d(""),g=d(""),I=d(""),O=d("");const B=d([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),K=o=>{v.value=o},L=o=>{g.value=o},X=()=>{p.value="REGISTRAR TIPO DE PAGO",Y(),A.value=!0,e.toggleModal()},Y=()=>{O.value="",I.value="",v.value="",g.value=""},Z=o=>{p.value="EDITAR TIPO DE PAGO",A.value=!1,z.value=o._id,O.value=o.description,I.value=o.name,v.value=o.name,g.value=o.description,e.toggleModal()};async function ee(o){try{const s=await xe(o,h.value);a.notify({type:"positive",message:"Tipo de pago desactivado correctamente",position:"top"}),_.value=[],q.value=[],b()}catch{a.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function te(){e.toggleModal();try{const o=await we({name:v.value,description:g.value},h.value);a.notify({type:"positive",message:"Tipo de pago registrado correctamente",position:"top"}),_.value=[],b()}catch{a.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function b(){_.value=[],q.value=[],T.value=!0;try{const{pays:o}=await qe(h.value);let s=1,P=1;o.forEach(c=>{c.status=c.status?"Inactivo":"Activo",c.status=="Activo"?(c.id=s++,_.value.push(c)):(c.id=P++,q.value.push(c)),c.description=c.description.trim()==""?"No registra":c.description}),T.value=!1}catch{a.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function ae(){try{const o=await ke({id:z.value,name:v.value,description:g.value},h.value);a.notify({type:"positive",position:"top",message:"Tipo de pago actualizado correctamente"}),e.toggleModal(),_.value=[],b()}catch{a.notify({type:"negative",position:"top",message:"Ocurrió un error"})}v.value="",g.value=""}async function oe(o){try{const s=await Te(o,h.value);a.notify({type:"positive",message:"Tipo de pago activado correctamente",position:"top"}),_.value=[],q.value=[],b()}catch{a.notify({type:"negative",message:"Ocurrió un error"})}}const h=G(()=>H.idSelected);return pe(h,()=>{b()}),ve(()=>{b()}),(o,s)=>{const P=y("q-separator"),c=y("q-tab"),ne=y("q-tabs"),M=y("q-icon"),N=y("q-input"),S=y("q-btn"),R=y("q-btn-group"),F=y("q-table"),U=y("q-tab-panel"),se=y("q-tab-panels"),le=y("q-card");return V(),ye(_e,null,[r("div",Pe,[r("div",Ve,[r("i",{class:"icon icon-backRoute q-pt-lg",onClick:s[0]||(s[0]=n=>o.$router.back())}),Ae]),t(P,{class:"separator"}),r("div",Ie,[t(ie,{onOnClick:X,label:"Crear tipo de pago"}),r("div",Oe,[t(le,null,{default:i(()=>[t(ne,{modelValue:u(f),"onUpdate:modelValue":s[1]||(s[1]=n=>w(f)?f.value=n:f=n),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[t(c,{name:"active",label:"Activos"}),t(c,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(P),t(se,{modelValue:u(f),"onUpdate:modelValue":s[4]||(s[4]=n=>w(f)?f.value=n:f=n),animated:""},{default:i(()=>[t(U,{name:"active"},{default:i(()=>[t(F,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:_.value,columns:B.value,filter:u(m),loading:T.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(N,{borderless:"",dense:"",debounce:"300",modelValue:u(m),"onUpdate:modelValue":s[2]||(s[2]=n=>w(m)?m.value=n:m=n),placeholder:"Buscar"},{append:i(()=>[t(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(n=>[r("td",Se,[t(R,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(S,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>Z(n.row)},null,8,["onClick"]),t(S,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>ee(n.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(U,{name:"inactive"},{default:i(()=>[t(F,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:q.value,columns:B.value,filter:u(m),loading:T.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[t(N,{borderless:"",dense:"",debounce:"300",modelValue:u(m),"onUpdate:modelValue":s[3]||(s[3]=n=>w(m)?m.value=n:m=n),placeholder:"Buscar"},{append:i(()=>[t(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(n=>[r("td",Ce,[t(R,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[t(S,{"text-color":"blue-10",class:"col q-pa-none",onClick:$=>oe(n.row._id)},{default:i(()=>[Ee]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),u(e).modalIsOpen?(V(),C(me,{key:0},{default:i(()=>[r("h6",ze,ge(p.value),1),r("div",De,[r("div",Be,[t(j,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:J,value:u(I),modelValue:u(v),"onUpdate:modelValue":s[5]||(s[5]=n=>w(v)?v.value=n:v=n),onOnWrite:K},null,8,["value","modelValue"]),t(j,{label:"Descripción",type:"text",required:!1,value:u(O),"v-model":u(g),onOnWrite:L},null,8,["value","v-model"]),Me,r("div",Ne,[A.value?(V(),C(W,{key:0,disable:u(D),onOnClick:te},null,8,["disable"])):(V(),C(W,{key:1,disable:u(D),onOnClick:ae},null,8,["disable"]))])])])]),_:1})):fe("",!0)],64)}}},$e=re(Re,[["__scopeId","data-v-b55c9e0a"]]);export{$e as default};
