import{g as q,m as ne,M as se,B as le,a as F}from"./ModalForm-db2ed3e8.js";import{s as w,_ as ie,l as ce,f as d,h as re,m as de,r as v,o as T,c as ue,a as i,d as t,w as l,i as u,g as C,j as pe,F as ve,q as h,t as ye,v as G,p as me,e as _e,x as j}from"./index-2558a67d.js";const fe=async()=>{try{const n=q(),{data:e}=await w.get("/maintenance/pays",{headers:{token:n}});return e}catch(n){console.error(n)}},ge=async n=>{try{const e=q(),{data:c}=await w.post("/maintenance/pays/register",{name:n.name,description:n.description},{headers:{token:e}});return c}catch(e){console.error(e)}},be=async n=>{try{const e=q(),{data:c}=await w.put(`/maintenance/pays/update/${n.id}`,{name:n.name,description:n.description},{headers:{token:e}});return c}catch(e){console.error(e)}},he=async n=>{try{const e=q(),{data:c}=await w.put(`/maintenance/pays/inactive/${n}`,{},{headers:{token:e}});return c}catch(e){console.error(e)}},qe=async n=>{try{const e=q(),{data:c}=await w.put(`/maintenance/pays/active/${n}`,{},{headers:{token:e}});return c}catch(e){console.error(e)}};const E=n=>(me("data-v-3ae7773a"),n=n(),_e(),n),we={class:"q-py-md table-container"},ke={class:"row"},xe=E(()=>i("h6",{class:"title q-my-lg"},"TIPOS DE PAGO",-1)),Te={class:"container-content"},Pe={class:"container-table q-mt-md q-pa-md",rounded:""},Ve={class:"accions-td"},Ie={class:"accions-td"},Oe=E(()=>i("i",{class:"icon icon-check"},null,-1)),Ae={class:"q-my-md text-center"},Ce={class:"row q-px-xl"},Ee={class:"col-12"},Se=E(()=>i("span",{class:"text-required q-py-sm"},[j("Todos los campos con "),i("span",{class:"text-red"},"*"),j(" son obligatorios")],-1)),De={class:"row justify-center"},ze={__name:"TypePays",setup(n){const e=ce(),c=ne(),P=d(""),k=d(!1),V=d(!0),_=d([]),g=d([]),S=d(),D=re(()=>p.value==""),W=[a=>!!a||"Este campo es requerido"];let y=d(""),m=d("active"),p=d(""),f=d(""),I=d(""),O=d("");const z=d([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),Q=a=>{p.value=a},H=a=>{f.value=a},J=()=>{P.value="REGISTRAR TIPO DE PAGO",K(),V.value=!0,c.toggleModal()},K=()=>{O.value="",I.value="",p.value="",f.value=""},L=a=>{P.value="EDITAR TIPO DE PAGO",V.value=!1,S.value=a._id,O.value=a.description,I.value=a.name,p.value=a.name,f.value=a.description,c.toggleModal()};async function X(a){try{const s=await he(a);e.notify({type:"positive",message:"Tipo de pago desactivado correctamente",position:"top"}),_.value=[],g.value=[],b()}catch{e.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function Y(){c.toggleModal();try{const a=await ge({name:p.value,description:f.value});e.notify({type:"positive",message:"Tipo de pago registrado correctamente",position:"top"}),_.value=[],b()}catch{e.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function b(){_.value=[],g.value=[],k.value=!0;try{const{pays:a}=await fe();let s=1,x=1;a.forEach(r=>{r.status=r.status?"Inactivo":"Activo",r.status=="Activo"?(r.id=s++,_.value.push(r)):(r.id=x++,g.value.push(r)),r.description=r.description.trim()==""?"No registra":r.description}),k.value=!1}catch{e.notify({type:"negative",message:"Ocurrió un error",position:"top"})}}async function Z(){try{const a=await be({id:S.value,name:p.value,description:f.value});e.notify({type:"positive",position:"top",message:"Tipo de pago actualizado correctamente"}),c.toggleModal(),_.value=[],b()}catch{e.notify({type:"negative",position:"top",message:"Ocurrió un error"})}p.value="",f.value=""}async function ee(a){try{const s=await qe(a);e.notify({type:"positive",message:"Tipo de pago activado correctamente",position:"top"}),_.value=[],g.value=[],b()}catch{e.notify({type:"negative",message:"Ocurrió un error"})}}return de(()=>{b()}),(a,s)=>{const x=v("q-separator"),r=v("q-tab"),te=v("q-tabs"),M=v("q-icon"),B=v("q-input"),A=v("q-btn"),N=v("q-btn-group"),R=v("q-table"),U=v("q-tab-panel"),ae=v("q-tab-panels"),oe=v("q-card");return T(),ue(ve,null,[i("div",we,[i("div",ke,[i("i",{class:"icon icon-backRoute q-pt-lg",onClick:s[0]||(s[0]=o=>a.$router.back())}),xe]),t(x,{class:"separator"}),i("div",Te,[t(le,{onOnClick:J,label:"Crear tipo de pago"}),i("div",Pe,[t(oe,null,{default:l(()=>[t(te,{modelValue:u(m),"onUpdate:modelValue":s[1]||(s[1]=o=>h(m)?m.value=o:m=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[t(r,{name:"active",label:"Activos"}),t(r,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),t(x),t(ae,{modelValue:u(m),"onUpdate:modelValue":s[4]||(s[4]=o=>h(m)?m.value=o:m=o),animated:""},{default:l(()=>[t(U,{name:"active"},{default:l(()=>[t(R,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:_.value,columns:z.value,filter:u(y),loading:k.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(B,{borderless:"",dense:"",debounce:"300",modelValue:u(y),"onUpdate:modelValue":s[2]||(s[2]=o=>h(y)?y.value=o:y=o),placeholder:"Buscar"},{append:l(()=>[t(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(o=>[i("td",Ve,[t(N,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(A,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>L(o.row)},null,8,["onClick"]),t(A,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:$=>X(o.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),t(U,{name:"inactive"},{default:l(()=>[t(R,{flat:"",bordered:"",title:"Pagos","row-key":"name",rows:g.value,columns:z.value,filter:u(y),loading:k.value,"rows-per-page-options":[5,10,20]},{"top-right":l(()=>[t(B,{borderless:"",dense:"",debounce:"300",modelValue:u(y),"onUpdate:modelValue":s[3]||(s[3]=o=>h(y)?y.value=o:y=o),placeholder:"Buscar"},{append:l(()=>[t(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":l(o=>[i("td",Ie,[t(N,{class:"full-width full-height",outline:"",square:""},{default:l(()=>[t(A,{"text-color":"blue-10",class:"col q-pa-none",onClick:$=>ee(o.row._id)},{default:l(()=>[Oe]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),u(c).modalIsOpen?(T(),C(se,{key:0},{default:l(()=>[i("h6",Ae,ye(P.value),1),i("div",Ce,[i("div",Ee,[t(G,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:W,value:u(I),modelValue:u(p),"onUpdate:modelValue":s[5]||(s[5]=o=>h(p)?p.value=o:p=o),onOnWrite:Q},null,8,["value","modelValue"]),t(G,{label:"Descripción",type:"text",required:!1,value:u(O),"v-model":u(f),onOnWrite:H},null,8,["value","v-model"]),Se,i("div",De,[V.value?(T(),C(F,{key:0,disable:u(D),onOnClick:Y},null,8,["disable"])):(T(),C(F,{key:1,disable:u(D),onOnClick:Z},null,8,["disable"]))])])])]),_:1})):pe("",!0)],64)}}},Ne=ie(ze,[["__scopeId","data-v-3ae7773a"]]);export{Ne as default};
