import{s as R,_ as he,m as qe,g as s,q as we,f as Z,l as ke,v as xe,x as Ve,r as v,o as I,c as ee,a as d,d as o,w as i,h as u,i as W,M as Pe,j as te,F as Oe,y as q,t as Se,z as C,B as ae,p as Ie,e as Ce,A as oe,R as le}from"./index-a2b1bd69.js";import{g as A,B as Re}from"./ButtonAdd-ed09f57b.js";const Ae=async l=>{try{const c=A(),{data:n}=await R.get("/inventory/product",{headers:{token:c,farm:l}});return n}catch(c){return c}},ze=async(l,c)=>{try{const n=A(),{data:r}=await R.post("/inventory/product/register",{name:l.name,category:l.category,mark:l.mark,amount:l.amount,description:l.description},{headers:{token:n,farm:c}});return r}catch(n){return n}},Ee=async(l,c)=>{try{const n=A(),{data:r}=await R.put(`/inventory/product/update/${l.id}`,{name:l.name,category:l.category,brand:l.brand,amount:l.amount,description:l.description},{headers:{token:n,farm:c}});return r}catch(n){return n}},Be=async(l,c)=>{try{const n=A(),{data:r}=await R.put(`/inventory/product/inactivate/${l}`,{},{headers:{token:n,farm:c}});return r}catch(n){return n}},Ne=async(l,c)=>{try{const n=A(),{data:r}=await R.put(`/inventory/product/activate/${l}`,{},{headers:{token:n,farm:c}});return r}catch(n){return n}};const F=l=>(Ie("data-v-d8de0e62"),l=l(),Ce(),l),Ue={class:"q-py-md table-container"},De={class:"row"},Me=F(()=>d("h6",{class:"title q-my-lg"},"PRODUCTOS",-1)),Te={class:"container-content"},We={class:"container-table q-mt-md q-pa-md",rounded:""},Fe={class:"accions-td"},je={class:"accions-td"},Ge=F(()=>d("i",{class:"icon icon-check"},null,-1)),Le={class:"q-my-md text-center"},Qe={class:"row q-px-xl"},$e={class:"col-12"},He=F(()=>d("span",{class:"text-required q-pb-sm"},[oe("Todos los campos con "),d("span",{class:"text-red"},"*"),oe(" son obligatorios")],-1)),Je={class:"row justify-center"},Ke={key:0,class:"spinner"},Xe={__name:"Products",setup(l){const c=qe(),n=s(""),r=s(!1),E=s(!0),k=s([]),P=s([]),j=s(),ne=we(),x=s(!1),G=Z(()=>p.value!=""||m.value!=""||f.value!=""||g.value!=""||y.value!=""?!1:x.value==!0),O=[e=>!!e||"Este campo es requerido"];let _=s(""),p=s(""),m=s(""),f=s(""),g=s(""),y=s(""),B=s(""),N=s(""),U=s(""),D=s(""),M=s(""),w=s("active");const se=ke(),L=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"category",label:"Categoria",field:"category",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"mark",label:"Marca",field:"mark",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"amount",label:"Cantidad",field:"amount",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripción",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-medium); font-weight: bold;",style:"font-size: var(--font-medium);"}]),Q=e=>{p.value=e},re=e=>{m.value=e},ue=e=>{f.value=e},ce=e=>{g.value=e},ie=()=>{n.value="REGISTRAR PRODUCTOS",B.value="",N.value="",U.value="",D.value="",M.value="",E.value=!0,c.toggleModal(),p.value="",y.value="",m.value="",f.value="",g.value=""},de=e=>{n.value="EDITAR PRODUCTOS",E.value=!1,j.value=e._id,B.value=e.name,N.value=e.category,U.value=e.mark,D.value=e.amount,M.value=e.description,p.value=e.name,m.value=e.categories,y.value=e.description,f.value=e.brand,g.value=e.amount,c.toggleModal()},h=(e,a)=>{se.notify({type:e,message:a,position:"top"})},S=async()=>{k.value=[],P.value=[],r.value=!0;try{const{product:e}=await Ae(V.value);let a=1,z=1;e.forEach(b=>{b.status=b.status?"Inactivo":"Activo",b.status=="Activo"?(b.id=a++,k.value.push(b)):(b.id=z++,P.value.push(b))}),r.value=!1}catch{r.value=!1,h("negative","Ocurrió un error")}};async function ve(){x.value=!0,(await ze({name:p.value,category:m.value,mark:f.value,amount:g.value,description:y.value==""?"No registra":y.value},V.value)).msg!=le.ERROROPERATION?(x.value=!1,h("positive","Producto registrado correctamente"),c.toggleModal(),k.value=[],S()):(x.value=!1,h("negative","Ocurrió un error"))}async function pe(){x.value=!0;const e=await Ee({id:j.value,name:p.value,categories:m.value,brand:f.value,amount:g.value},V.value);x.value=!1,e.msg!=le.ERROROPERATION?(h("positive","Producto actualizado correctamente"),c.toggleModal(),k.value=[],S()):h("negative","Ocurrió un error"),p.value="",f.value="",m.value="",g.value=""}async function me(e){r.value=!0;try{const a=await Ne(e,V.value);r.value=!1,h("positive","Producto activado correctamente"),k.value=[],P.value=[],S()}catch{r.value=!1,h("negative","Ocurrió un error")}}async function fe(e){r.value=!0;try{const a=await Be(e,V.value);r.value=!1,h("positive","Producto desactivado correctamente"),k.value=[],P.value=[],S()}catch{r.value=!1,h("negative","Ocurrió un error")}}const V=Z(()=>ne.idSelected);return xe(V,()=>{getDataUsers()}),Ve(()=>{S()}),(e,a)=>{const z=v("q-separator"),b=v("q-tab"),ge=v("q-tabs"),$=v("q-icon"),H=v("q-input"),T=v("q-btn"),J=v("q-btn-group"),K=v("q-table"),X=v("q-tab-panel"),_e=v("q-tab-panels"),be=v("q-card"),ye=v("q-spinner-ios");return I(),ee(Oe,null,[d("div",Ue,[d("div",De,[d("i",{class:"icon icon-backRoute q-pt-lg",onClick:a[0]||(a[0]=t=>e.$router.back())}),Me]),o(z,{class:"separator"}),d("div",Te,[o(Re,{onOnClick:ie,label:"Crear nuevo producto"}),d("div",We,[o(be,null,{default:i(()=>[o(ge,{modelValue:u(w),"onUpdate:modelValue":a[1]||(a[1]=t=>q(w)?w.value=t:w=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[o(b,{name:"active",label:"Activos"}),o(b,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),o(z),o(_e,{modelValue:u(w),"onUpdate:modelValue":a[4]||(a[4]=t=>q(w)?w.value=t:w=t),animated:""},{default:i(()=>[o(X,{name:"active"},{default:i(()=>[o(K,{flat:"",bordered:"",title:"Bodegas","row-key":"name",rows:k.value,columns:L.value,filter:u(_),loading:r.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[o(H,{borderless:"",dense:"",debounce:"300",modelValue:u(_),"onUpdate:modelValue":a[2]||(a[2]=t=>q(_)?_.value=t:_=t),placeholder:"Search"},{append:i(()=>[o($,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(t=>[d("td",Fe,[o(J,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[o(T,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Y=>de(t.row)},null,8,["onClick"]),o(T,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none",onClick:Y=>fe(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),o(X,{name:"inactive"},{default:i(()=>[o(K,{flat:"",bordered:"",title:"Bodegas","row-key":"name",rows:P.value,columns:L.value,filter:u(_),loading:r.value,"rows-per-page-options":[5,10,20]},{"top-right":i(()=>[o(H,{borderless:"",dense:"",debounce:"300",modelValue:u(_),"onUpdate:modelValue":a[3]||(a[3]=t=>q(_)?_.value=t:_=t),placeholder:"Search"},{append:i(()=>[o($,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":i(t=>[d("td",je,[o(J,{class:"full-width full-height",outline:"",square:""},{default:i(()=>[o(T,{"text-color":"blue-10",class:"col q-pa-none",onClick:Y=>me(t.row._id)},{default:i(()=>[Ge]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),u(c).modalIsOpen?(I(),W(Pe,{key:0},{default:i(()=>[d("h6",Le,Se(n.value),1),d("div",Qe,[d("div",$e,[o(C,{label:"Nombre",required:!0,type:"text",ruless:O,value:u(B),modelValue:u(p),"onUpdate:modelValue":a[5]||(a[5]=t=>q(p)?p.value=t:p=t),onOnWrite:Q},null,8,["value","modelValue"]),o(C,{class:"q-pb-xs",label:"Categoria",required:!0,type:"text",ruless:O,value:u(N),modelValue:u(m),"onUpdate:modelValue":a[6]||(a[6]=t=>q(m)?m.value=t:m=t),onOnWrite:re},null,8,["value","modelValue"]),o(C,{class:"q-pb-xs",label:"Marca",required:!0,type:"text",ruless:O,value:u(U),modelValue:u(f),"onUpdate:modelValue":a[7]||(a[7]=t=>q(f)?f.value=t:f=t),onOnWrite:ue},null,8,["value","modelValue"]),o(C,{class:"q-pb-xs",label:"Cantidad",required:!0,type:"text",ruless:O,value:u(D),modelValue:u(g),"onUpdate:modelValue":a[8]||(a[8]=t=>q(g)?g.value=t:g=t),onOnWrite:ce},null,8,["value","modelValue"]),o(C,{label:"Descripción",required:!0,ruless:O,type:"text",value:u(M),modelValue:u(y),"onUpdate:modelValue":a[9]||(a[9]=t=>q(y)?y.value=t:y=t),onOnWrite:Q},null,8,["value","modelValue"]),He,d("div",Je,[E.value?(I(),W(ae,{key:0,disable:u(G),onOnClick:ve},null,8,["disable"])):(I(),W(ae,{key:1,disable:u(G),onOnClick:pe},null,8,["disable"]))]),x.value?(I(),ee("div",Ke,[o(ye,{color:"primary",size:"2.5em"})])):te("",!0)])])]),_:1})):te("",!0)],64)}}},et=he(Xe,[["__scopeId","data-v-d8de0e62"]]);export{et as default};
