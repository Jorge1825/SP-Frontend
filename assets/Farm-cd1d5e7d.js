import{s as E,_ as j,f as r,h as G,l as H,r as q,o as F,c as J,a as s,d as l,w as y,i,g as K,j as L,F as P,m as g,q as v,p as Q,e as X,v as I}from"./index-dd023763.js";import{g as S,m as Y,M as Z,B as $,a as ee}from"./ButtonSave-fa15d2e0.js";const te=async()=>{try{const a=S(),{data:n}=await E.get("/maintenance/farm",{headers:{token:a}});return n}catch(a){console.error(a)}},ae=async a=>{try{const n=S(),{data:_}=await E.post("/maintenance/farm/register",{name:a.name,description:a.description,nit:a.nit,ubication:a.ubication,miniumExistence:a.miniumExistence},{headers:{token:n}});return _}catch(n){console.error(n)}};const h=a=>(Q("data-v-5cbb7e29"),a=a(),X(),a),oe={class:"q-py-md table-container"},le=h(()=>s("h6",{class:"title q-my-lg"},"Finca",-1)),se={class:"container-content"},ne={class:"container-table q-mt-md q-pa-md",rounded:""},re=h(()=>s("h6",{class:"q-my-md text-center"},"REGISTRAR FINCA",-1)),ie={class:"row q-px-xl"},ce={class:"col-12"},de=h(()=>s("span",{class:"text-required q-pb-sm"},[I("Todos los campos con "),s("span",{class:"text-red"},"*"),I(" son obligatorios")],-1)),ue={class:"row justify-center"},me={__name:"Farm",setup(a){const n=Y(),_=r(!1);let c=r(""),u=r(""),m=r(""),x=r(""),p=r(""),f=r(""),z=G(()=>c.value=="");const b=[t=>!!t||"Este campo es requerido"],V=r([]),k=r([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"description",label:"Descripci贸n",field:"description",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"nit",label:"NIT",field:"nit",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"ubication",label:"Ubicaci贸n",field:"ubication",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"miniumExistence",label:"Minimo Existencias",field:"miniumExistence",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"status",label:"Estado",field:"status",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),N=()=>{n.toggleModal(),c.value="",u.value="",m.value="",p.value="",f.value=""},U=t=>{c.value=t},B=t=>{u.value=t},C=t=>{m.value=t},M=t=>{p.value=t},O=t=>{f.value=t},T=()=>{A(),n.toggleModal()},A=async()=>{await ae({name:c.value,description:u.value}),w()},w=async()=>{_.value=!0;const{farm:t}=await te();let o=1;t.forEach(d=>{d.status=d.status?"Inactivo":"Activo",d.id=o++,d.description=d.description.trim()==""?"No registra":d.description}),V.value=t,_.value=!1};return H(()=>{w()}),(t,o)=>{const d=q("q-separator"),D=q("q-icon"),W=q("q-input"),R=q("q-table");return F(),J(P,null,[s("div",oe,[le,l(d,{class:"separator"}),s("div",se,[l($,{onOnClick:N,label:"Crear nueva finca"}),s("div",ne,[l(R,{flat:"",bordered:"",title:"Fincas","row-key":"name",rows:V.value,columns:k.value,filter:i(x),loading:_.value,"rows-per-page-options":[5,10,20]},{"top-right":y(()=>[l(W,{borderless:"",dense:"",debounce:"300",modelValue:i(x),"onUpdate:modelValue":o[0]||(o[0]=e=>g(x)?x.value=e:x=e),placeholder:"Search"},{append:y(()=>[l(D,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"])])])]),i(n).modalIsOpen?(F(),K(Z,{key:0},{default:y(()=>[re,s("div",ie,[s("div",ce,[l(v,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:b,modelValue:i(c),"onUpdate:modelValue":o[1]||(o[1]=e=>g(c)?c.value=e:c=e),onOnWrite:U},null,8,["modelValue"]),l(v,{class:"q-pb-xs",label:"Descripci贸n",type:"text",required:!1,ruless:b,modelValue:i(u),"onUpdate:modelValue":o[2]||(o[2]=e=>g(u)?u.value=e:u=e),onOnWrite:B},null,8,["modelValue"]),l(v,{class:"q-pb-xs",label:"NIT",required:!0,type:"text",ruless:b,modelValue:i(m),"onUpdate:modelValue":o[3]||(o[3]=e=>g(m)?m.value=e:m=e),onOnWrite:C},null,8,["modelValue"]),l(v,{class:"q-pb-xs",label:"Ubicaci贸n",required:!0,type:"text",ruless:b,modelValue:i(p),"onUpdate:modelValue":o[4]||(o[4]=e=>g(p)?p.value=e:p=e),onOnWrite:M},null,8,["modelValue"]),l(v,{class:"q-pb-xs",label:"Unidad Cana",required:!0,type:"text",ruless:b}),l(v,{class:"q-pb-xs",label:"Minimo Existencias",required:!0,type:"text",ruless:b,modelValue:i(f),"onUpdate:modelValue":o[5]||(o[5]=e=>g(f)?f.value=e:f=e),onOnWrite:O},null,8,["modelValue"]),de,s("div",ue,[l(ee,{disable:i(z),onOnClick:T},null,8,["disable"])])])])]),_:1})):L("",!0)],64)}}},be=j(me,[["__scopeId","data-v-5cbb7e29"]]);export{be as default};
