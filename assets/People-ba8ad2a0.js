import{g as O,B as Pe}from"./ButtonAdd-005d7d30.js";import{s as z,_ as we,l as Ve,m as Se,g as s,q as ke,f as te,v as xe,x as Ae,r as p,o as N,c as Ee,a as r,d as l,w as c,h as u,i as B,M as Ie,j as Oe,F as ze,y as P,C as ae,z as R,B as le,p as Ce,e as Ne,A as oe}from"./index-d466a28b.js";const Re=async o=>{try{const i=O(),{data:n}=await z.get("/maintenance/people",{headers:{token:i,farm:o}});return n}catch(i){return i}},Te=async(o,i)=>{try{const n=O(),{data:v}=await z.post("/maintenance/people/register",{name:o.name,tpdct:o.tpdct,document:o.document,phone:o.phone,eps:o.eps,typePeople:o.typePeople},{headers:{token:n,farm:i}});return v}catch(n){return n}},De=async(o,i)=>{try{const n=O(),{data:v}=await z.post(`/maintenance/people/update/${o.id}`,{name:o.name,tpdct:o.tpdct,document:o.document,phone:o.phone,eps:o.eps,typePeople:o.typePeople},{headers:{token:n,farm:i}});return v}catch(n){return n}},Me=async(o,i)=>{try{const n=O(),{data:v}=await z.put(`/maintenance/people/inactive/${o}`,{},{headers:{token:n,farm:i}});return v}catch(n){return n}},Be=async(o,i)=>{try{const n=O(),{data:v}=await z.put(`/maintenance/people/active/${o}`,{},{headers:{token:n,farm:i}});return v}catch(n){return n}};const T=o=>(Ce("data-v-6c044be0"),o=o(),Ne(),o),Ue={class:"q-py-md table-container"},Fe={class:"row"},We=T(()=>r("h6",{class:"title q-my-lg"},"PERSONAS",-1)),je={class:"container-content"},Ge={class:"container-table q-mt-md q-pa-md",rounded:""},Le={class:"accions-td"},Qe={class:"accions-td"},$e=T(()=>r("i",{class:"icon icon-check"},null,-1)),He=T(()=>r("h6",{class:"q-my-md text-center"},"REGISTRAR PERSONA",-1)),Je={class:"row q-px-xl"},Ke={class:"col-12"},Xe={class:"row"},Ye=T(()=>r("span",{class:"text-required q-pb-sm"},[oe("Todos los campos con "),r("span",{class:"text-red"},"*"),oe(" son obligatorios")],-1)),Ze={class:"row justify-center"},et={__name:"People",setup(o){const i=Ve(),n=Se(),v=s(""),D=s(!0),U=s(),ne=ke(),S=s(!1),k=s([]),d=s(!1),I=s([]),F=te(()=>f.value==""||_.value==""||b.value==""||g.value==""||y.value==""||h.value==""?!0:S.value==!0),x=[e=>!!e||"Este campo es requerido"];let m=s(""),V=s("active"),f=s(""),_=s(""),b=s(""),g=s(""),y=s(""),h=s(""),W=s(""),j=s(""),G=s(""),L=s(""),Q=s(""),$=s("");const H=s([{name:"id",label:"#",field:"id",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"document",label:"Número Documento",field:"document",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"phone",label:"Teléfono",field:"phone",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"eps",label:"Eps",field:"eps",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"typePeople",label:"Tipo de Persona",field:"typePeople",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"},{name:"Acciones",label:"Acciones",field:"acciones",align:"left",sortable:!0,headerStyle:"font-size: var(--font-large); font-weight: bold;",style:"font-size: var(--font-large);"}]),se=e=>{f.value=e},ue=e=>{_.value=e},re=e=>{b.value=e},ce=e=>{g.value=e},ie=e=>{y.value=e},de=e=>{h.value=e},pe=()=>{v.value="REGISTRAR PERSONA",ve(),D.value=!0,n.toggleModal()},ve=()=>{f.value="",_.value="",b.value="",g.value="",y.value="",h.value=""},me=e=>{v.value="EDITAR PERSONA",D.value=!1,U.value=e._id,f.value=e.tpdct,W.value=e.tpdct,_.value=e.document,j.value=e.document,b.value=e.name,G.value=e.name,g.value=e.phone,L.value=e.phone,y.value=e.eps,Q.value=e.eps,h.value=e.typePeople,$.value=e.typePeople,n.toggleModal()},w=(e,a)=>{i.notify({type:e,message:a,position:"top"})};async function A(){k.value=[],I.value=[],d.value=!0;try{const{people:e}=await Re(E.value);let a=1,C=1;e.forEach(q=>{q.status=q.status?"Inactivo":"Activo",q.status=="Activo"?(q.id=a++,k.value.push(q)):(q.id=C++,I.value.push(q))}),d.value=!1}catch{d.value=!1,w("negative","Ocurrió un error")}}async function fe(){S.value=!0;try{const e=await Te({name:b.value,tpdct:f.value,document:_.value,phone:g.value,eps:y.value,typePeople:h.value},E.value);S.value=!1,w("positive","Se registró correctamente"),n.toggleModal(),k.value=[],A()}catch{S.value=!1,w("negative","Ocurrió un error")}}async function _e(){S.value=!0;try{const e=await De({id:U.value,name:b.value,tpdct:f.value,document:_.value,phone:g.value,eps:y.value,typePeople:h.value},E.value);S.value=!1,w("positive","Se actualizó correctamente"),n.toggleModal(),k.value=[],A()}catch{S.value=!1,w("negative","Ocurrió un error")}}async function be(e){d.value=!0;try{const a=await Be(e,E.value);w("positive","Se activó correctamente"),d.value=!1,k.value=[],I.value=[],A()}catch{d.value=!1,w("negative","Ocurrió un error")}}async function ge(e){d.value=!0;try{const a=await Me(e,E.value);w("positive","Se inactivó correctamente"),d.value=!1,k.value=[],I.value=[],A()}catch{d.value=!1,w("negative","Ocurrió un error")}}const E=te(()=>ne.idSelected);return xe(E,()=>{A()}),Ae(()=>{A()}),(e,a)=>{const C=p("q-separator"),q=p("q-tab"),ye=p("q-tabs"),J=p("q-icon"),K=p("q-input"),M=p("q-btn"),X=p("q-btn-group"),Y=p("q-table"),Z=p("q-tab-panel"),he=p("q-tab-panels"),qe=p("q-card");return N(),Ee(ze,null,[r("div",Ue,[r("div",Fe,[r("i",{class:"icon icon-backRoute q-pt-lg",onClick:a[0]||(a[0]=t=>e.$router.back())}),We]),l(C,{class:"separator"}),r("div",je,[l(Pe,{onOnClick:pe,label:"Crear nueva persona"}),r("div",Ge,[l(qe,null,{default:c(()=>[l(ye,{modelValue:u(V),"onUpdate:modelValue":a[1]||(a[1]=t=>P(V)?V.value=t:V=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:c(()=>[l(q,{name:"active",label:"Activos"}),l(q,{name:"inactive",label:"Inactivos"})]),_:1},8,["modelValue"]),l(C),l(he,{modelValue:u(V),"onUpdate:modelValue":a[4]||(a[4]=t=>P(V)?V.value=t:V=t),animated:""},{default:c(()=>[l(Z,{name:"active"},{default:c(()=>[l(Y,{flat:"",bordered:"",title:"Personas","row-key":"name",rows:k.value,columns:H.value,filter:u(m),loading:d.value,"rows-per-page-options":[5,10,20]},{"top-right":c(()=>[l(K,{borderless:"",dense:"",debounce:"300",modelValue:u(m),"onUpdate:modelValue":a[2]||(a[2]=t=>P(m)?m.value=t:m=t),placeholder:"Buscar"},{append:c(()=>[l(J,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":c(t=>[r("td",Le,[l(X,{class:"full-width full-height",outline:"",square:""},{default:c(()=>[l(M,{icon:"edit_note","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:ee=>me(t.row)},null,8,["onClick"]),l(M,{icon:"highlight_off","text-color":"blue-10",class:"col text-bold q-pa-none icon-table",onClick:ee=>ge(t.row._id)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),l(Z,{name:"inactive"},{default:c(()=>[l(Y,{flat:"",bordered:"",title:"Personas","row-key":"name",rows:I.value,columns:H.value,filter:u(m),loading:d.value,"rows-per-page-options":[5,10,20]},{"top-right":c(()=>[l(K,{borderless:"",dense:"",debounce:"300",modelValue:u(m),"onUpdate:modelValue":a[3]||(a[3]=t=>P(m)?m.value=t:m=t),placeholder:"Search"},{append:c(()=>[l(J,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-Acciones":c(t=>[r("td",Qe,[l(X,{class:"full-width full-height",outline:"",square:""},{default:c(()=>[l(M,{"text-color":"blue-10",class:"col q-pa-none",onClick:ee=>be(t.row._id)},{default:c(()=>[$e]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),u(n).modalIsOpen?(N(),B(Ie,{key:0},{default:c(()=>[He,r("div",Je,[r("div",Ke,[r("div",Xe,[l(ae,{class:"col-5 q-mb-lg q-pr-sm",type:"documents",label:"Tipo de Documento",ruless:x,modelValue:u(f),"onUpdate:modelValue":a[5]||(a[5]=t=>P(f)?f.value=t:f=t),value:u(W),onOnSelect:se},null,8,["modelValue","value"]),l(R,{class:"col-7 q-pb-xs",label:"Número de Documento",required:!0,type:"text",ruless:x,value:u(j),modelValue:u(_),"onUpdate:modelValue":a[6]||(a[6]=t=>P(_)?_.value=t:_=t),onOnWrite:ue},null,8,["value","modelValue"])]),l(R,{class:"q-pb-xs",label:"Nombre",required:!0,type:"text",ruless:x,value:u(G),modelValue:u(b),"onUpdate:modelValue":a[7]||(a[7]=t=>P(b)?b.value=t:b=t),onOnWrite:re},null,8,["value","modelValue"]),l(R,{class:"q-pb-xs",label:"Teléfono",required:!0,type:"text",ruless:x,modelValue:u(g),"onUpdate:modelValue":a[8]||(a[8]=t=>P(g)?g.value=t:g=t),value:u(L),onOnWrite:ce},null,8,["modelValue","value"]),l(ae,{class:"q-pb-xs q-mb-md",label:"EPS",required:!0,ruless:x,value:u(Q),modelValue:u(y),"onUpdate:modelValue":a[9]||(a[9]=t=>P(y)?y.value=t:y=t),type:"eps",onOnSelect:ie},null,8,["value","modelValue"]),l(R,{class:"q-pb-xs",label:"Tipo de Persona",required:!0,type:"text",ruless:x,value:u($),modelValue:u(h),"onUpdate:modelValue":a[10]||(a[10]=t=>P(h)?h.value=t:h=t),onOnWrite:de},null,8,["value","modelValue"]),Ye,r("div",Ze,[D.value?(N(),B(le,{key:0,disable:u(F),onOnClick:fe},null,8,["disable"])):(N(),B(le,{key:1,disable:u(F),onOnClick:_e},null,8,["disable"]))])])])]),_:1})):Oe("",!0)],64)}}},lt=we(et,[["__scopeId","data-v-6c044be0"]]);export{lt as default};
